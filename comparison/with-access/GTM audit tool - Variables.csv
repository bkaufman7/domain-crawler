Variable ID,Name,Type,Default Value,Parameters (flattened),Used By Tags,Used By Triggers,Folder,Violations
7,GA4 - Ecommerce - items,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.items""}","Horizon - Facebook - Shark - Add to Cart, Horizon - Facebook - Shark - Page View, Horizon - Facebook - Ninja - Purchase, GA4 - Ecommerce - view_cart, Horizon - Reddit - Shark - View Item, GA4 - Ecommerce - select_item, Trade Desk - Purchase - Shark - (HX-Horizon), Horizon - Facebook - Ninja - Pageview, GA4 - Ecommerce - remove_from_cart, Facebook - Shark - Complete Registration, Horizon - Facebook - Ninja - Add to Cart, Horizon - Facebook - Ninja - Pageview - Check Order, Horizon - Facebook - Shark - Initiate Checkout, Horizon - Facebook - Ninja - Initiate Checkout, Facebook - Shark - Page View, GA4 - Ecommerce - add_to_cart, Horizon - Facebook - Shark - ViewContent, Horizon - Facebook - Ninja - ViewContent, Horizon - Facebook - Shark - Purchase, Horizon - Reddit - Shark - Add To Cart, GA4 - Ecommerce - add_payment_info, Horizon - Facebook - Shark - Page View - Check Order, Horizon - Facebook - Ninja - SignUp, Horizon - Facebook - Shark - SignUp, Horizon - Facebook - Ninja - Complete Registration, GA4 - SS - Send Events, Horizon - Facebook - Shark - AddPaymentInfo, Horizon - Reddit - Shark - Purchase, GA4 - Ecommerce - purchase, GA4 - Ecommerce - add_shipping_info, GA4 - Ecommerce - begin_checkout, Rokt - purchase",,GA4,
8,cJS - eCommerce - items (normalized),jsm,,"{""javascript"":""function() {\n  /**\n   * the ecommerce.items item should be an array of product objects\n   * in some instances it comes in as an array with an array of product objects\n   *\n   * here we'll try to sniff that out so we can work\n   * directly on an array of product objects\n   **/\n  var items = {{GA4 - Ecommerce - items}};\n\n  if (!items) return [];\n\n  if (Array.isArray(items[0])) {\n    return items[0];\n  }\n  \n  return items;\n}""}",GA4 - Ecommerce - view_item_list,,,
9,cJS - eCommerce - ninjaProducts,jsm,,"{""javascript"":""function() {\n  var allProducts = {{cJS - eCommerce - items (normalized)}};\n  var filteredProducts = [];\n\n  for(var i = 0; i < allProducts.length; i++){\n    if (allProducts[i].item_brand === 'Ninja') {\n      filteredProducts.push(allProducts[i]);\n    }\n  }\n\n  return filteredProducts;\n}""}",TikTok - Ninja - Start Checkout,,,
10,cJS - eCommerce - hasNinjaProducts,jsm,,"{""javascript"":""function() {\n  var products = {{cJS - eCommerce - ninjaProducts}};\n\n  if (!products || !Array.isArray(products)) {\n      return false;\n  }\n      \n  return products.length > 0;\n}""}",,"GA4 - Ninja - begin_checkout, cEvent - page_view - checkout placeOrder - Ninja, Ninja Products - page_view_delayed, Ecommerce Ninja Products - page_view_delayed, GA4 - Ninja - add_to_cart, GA4 - Ninja - purchase, Ninja Products - view_item, GA4 - Ninja - add_payment_info, GA4 - Ninja - remove_from_cart",,
12,DLV - video_url,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""video_url""}","GA4 - Event - video_progress, GA4 - Event - video_in_viewport, GA4 - Event - video",,,
13,cJS - Product Price - First,jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var price = [];\n  for(var i = 0; i < products.length; i++){\n    price[i] = products[i].price;\n  }\n  return price[0];\n}""}",Horizon - TikTok - Shark - Product Detail,,,
15,experienceName,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""experienceName""}",GA4 - Event - Dynamic Yield,,,
16,dlv - coupon_apply_code,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""coupon_apply_code""}",GA4 - Promo Code Apply,,,
24,GA4 - Ecommerce - currency,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.currency""}","ContentSquare - Ecommerce, Horizon - Snapchat - Ninja - Purchase, cHTML - Bazaar Voice - Shark - Transaction, Horizon - Snapchat - Shark - Purchase, Horizon - Pinterest - Shark - Purchase, cHTML - Bazaar Voice - Shark - Transaction (UAT), GA4 - SS - Send Events, Horizon - Pinterest - Ninja - Purchase, GA4 - Ecommerce - purchase",,GA4,
27,GA4 - Ecommerce - value,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.value""}","ContentSquare - Ecommerce, Horizon - DCM - Shark - Purchase, Horizon - Amazon - Purchase Minus Beauty, cHTML - Clinch - Initiate Checkout, cHTML - Beampix - Purchase, DCM - Shark - Checkout (PMG), GA4 - Ecommerce - view_cart, GA4 - Ecommerce - select_item, Google Ads - Purchase - Conversion (PMG), Horizon - Kerv - Shark - Purchase, Google Ads - Shark MCC - Conversion (PMG), Facebook - Shark - Complete Registration, cHTML - Clinch - Purchase, cHTML - Clinch - Add to Cart, cHTML - Bazaar Voice - Shark - Transaction, TikTok - Ninja - Start Checkout, Horizon - Facebook - Ninja - Pageview - Check Order, DCM - Waitlist (PMG), Horizon - Amazon - Beauty Purchase, Horizon - TikTok - Shark - Product Detail, GA4 - Ecommerce - view_item, MiQ - Purchase, cHTML - Clinch - ViewContent (PDP), DCM - Shark - Purchase (PMG), Google Ads - Shark Conversion - Conversion (PMG), DCM - Shark - View Product Page (PMG), GA4 - Ecommerce - add_payment_info, DCM - All Pages Standard (PMG), Horizon Connect - Event - Purchase, Horizon - ArtsAI - Ninja - Purchase, cHTML - Bazaar Voice - Shark - Transaction (UAT), cHTML - Extole - Conversion, DCM - All Pages Unique (PMG), Horizon - Facebook - Shark - SignUp, TikTok - Shark - Start Checkout, Google Ads - Ninja Cross-Account Conversion Tracking - Conversion (PMG), GA4 - SS - Send Events, Horizon - Facebook - Shark - AddPaymentInfo, cHTML Amazon Fire TV Rotator - Purchase/AddToCart, GA4 - Ecommerce - purchase, GA4 - Ecommerce - add_shipping_info, GA4 - Ecommerce - begin_checkout, Rokt - purchase, Upsellit Confirmation Tag, Horizon - SharkNinja - Purchase Confirmation",,GA4,
28,GA4 - Ecommerce - transaction_id,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.transaction_id""}","ContentSquare - Ecommerce, Horizon - DCM - Shark - Purchase, cHTML - Beampix - Purchase, Horizon - Reddit - Ninja - Purchase, DCM - Shark - Checkout (PMG), Horizon - Snapchat - Ninja - Purchase, Horizon (HX) - Ninja - Trade Desk - Purchase, Trade Desk - Purchase - Shark - (HX-Horizon), Google Ads - Purchase - Conversion (PMG), Horizon - Kerv - Shark - Purchase, Google Ads - Shark MCC - Conversion (PMG), cHTML - Clinch - Purchase, cHTML - Bazaar Voice - Shark - Transaction, Horizon - Snapchat - Shark - Purchase, Horizon - Pinterest - Shark - Purchase, Horizon - Google Ads - Ninja - Conversion, cHTML - tvScientific - purchase, DCM - Waitlist (PMG), MiQ - Purchase, DCM - Shark - Purchase (PMG), cHTML - Set Transaction Cookie, Horizon - Facebook - Shark - Purchase, Google Ads - Shark Conversion - Conversion (PMG), DCM - Shark - View Product Page (PMG), Horizon - ArtsAI - Shark - Purchase, Horizon Connect - Event - Purchase, Horizon - ArtsAI - Ninja - Purchase, cHTML - Bazaar Voice - Shark - Transaction (UAT), cHTML - Extole - Conversion, cHTML - Criteo Conversion Tag, Horizon - DCM - Ninja - Purchase, cHTML - Zoovu - Base code and conversion, Google Ads - Ninja Cross-Account Conversion Tracking - Conversion (PMG), GA4 - SS - Send Events, Horizon - Reddit - Shark - Purchase, Horizon - Pinterest - Ninja - Purchase, GA4 - Ecommerce - purchase, Rokt - purchase, Upsellit Confirmation Tag, Horizon - SharkNinja - Purchase Confirmation",,GA4,
32,Extole Popup ID,c,extole-7509097117119098435,"{""value"":""extole-7509097117119098435""}",cHTML - Capture Popup Contents,cEvent - Popup Visibility,,
33,GA4 - Ecommerce - item currency,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.items.0.currency""}","Horizon - Facebook - Shark - Add to Cart, Horizon - TikTok - Shark - Add to cart, GA4 - Ecommerce - view_cart, GA4 - Ecommerce - select_item, GA4 - Ecommerce - remove_from_cart, Horizon - TikTok - Shark - Start Checkout, Horizon - TikTok - Shark - Product Detail, GA4 - Ecommerce - view_item, Horizon - Reddit - Shark - Add To Cart, GA4 - Ecommerce - add_payment_info, cHTML - Zoovu - Base code and conversion, Horizon - Facebook - Shark - AddPaymentInfo, GA4 - Ecommerce - add_shipping_info, GA4 - Ecommerce - begin_checkout",,,
35,event ID,cvt_M63B8,,{},"Horizon - Facebook - Shark - Add to Cart, Horizon - Facebook - Shark - Page View, Horizon - Snapchat - Ninja - Add To Cart, Horizon - Reddit - Ninja - Pageview - Check Order, Horizon - Reddit - Ninja - Purchase, Horizon - Snapchat - Ninja - Purchase, Horizon - Facebook - Ninja - Purchase, Horizon - Snapchat - Ninja - PageView - Check Order, Horizon - Pinterest - Shark - Add To Cart, Horizon - Pinterest - Ninja - Pageview, Horizon - Reddit - Ninja - Pageview, Horizon - Facebook - Ninja - Pageview, Facebook - Shark - Complete Registration, Horizon - Facebook - Ninja - Add to Cart, Horizon - Pinterest - Ninja - Add To Cart, Horizon - Snapchat - Shark - Checkout, Amazon - Add To Cart, Horizon - Snapchat - Shark - Purchase, TikTok - Ninja - Start Checkout, Horizon - Facebook - Ninja - Pageview - Check Order, Horizon - Facebook - Shark - Initiate Checkout, Horizon - Snapchat - Shark - View Content, Horizon - Pinterest - Shark - Purchase, Horizon - Reddit - Ninja - View Content, Horizon - Pinterest - Shark - Product Page, Horizon - Snapchat - Ninja - PageView, Horizon - Facebook - Ninja - Initiate Checkout, Facebook - Shark - Page View, Horizon - Snapchat - Ninja - Checkout, Amazon - Signup, Horizon - Facebook - Shark - ViewContent, Horizon - Facebook - Ninja - ViewContent, Amazon - Page View, Horizon - Pinterest - Shark - Page Visit, Horizon - Facebook - Shark - Purchase, Horizon - Reddit - Shark - Add To Cart, Horizon - Facebook - Shark - Page View - Check Order, Horizon - Facebook - Ninja - SignUp, Amazon - Fire Rotator - View Item, Amazon - Site Search, Horizon - Snapchat - Ninja - View Content, Horizon - Snapchat - Shark - Add To Cart, Horizon - Reddit - Ninja - Add To Cart, Horizon - Facebook - Shark - SignUp, Horizon - Pinterest - Ninja - Product Page, Horizon - Facebook - Ninja - Complete Registration, Amazon - Off-Amazon-Purchase, TikTok - Shark - Start Checkout, GA4 - SS - Send Events, Horizon - Facebook - Shark - AddPaymentInfo, Amazon - Begin Checkout, Amazon - Fire Rotator - Page View, Horizon - Pinterest - Ninja - Purchase",,,
36,GA4 - Ecommerce - item_list_name,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.items.0.item_list_name""}","Horizon - Facebook - Shark - Add to Cart, Horizon - Facebook - Shark - Page View, Horizon - DCM - Shark - Purchase, DCM - Shark - Checkout (PMG), GA4 - Ecommerce - select_item, Horizon (HX) - Ninja - Trade Desk - Purchase, Trade Desk - Purchase - Shark - (HX-Horizon), Facebook - Shark - Complete Registration, Horizon Connect - Event - Product Pages, Horizon - Facebook - Shark - Initiate Checkout, Horizon - DCM - Shark - Add To Cart, Horizon - Facebook - Shark - ViewContent, Horizon - DCM - Shark - Waitlist, Horizon Connect - Event - Add to Cart, DCM - Shark - Purchase (PMG), Horizon - Facebook - Shark - Purchase, Horizon - Facebook - Shark - Page View - Check Order, GA4 - Ecommerce - view_item_list, Horizon Connect - Event - Purchase, Horizon - DCM - Ninja - Add To Cart, Horizon - DCM - Ninja - Purchase, Horizon - Facebook - Shark - SignUp, ContentSquare - Dynamic Ecomm Variable, Horizon - Facebook - Shark - AddPaymentInfo, Horizon - DCM - Ninja - Waitlist, Horizon - SharkNinja - Purchase Confirmation",,GA4,
37,cJS - Facebook - Product SKUs - Uppercase,jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var skus = [];\n  for(var i = 0; i < products.length; i++){\n    skus[i] = products[i].item_id.toUpperCase();\n  }\n  return skus;  // Return the array directly, not as a string\n}\n\n""}","Horizon - Facebook - Shark - Add to Cart, Horizon - Facebook - Shark - Initiate Checkout, Horizon - Facebook - Shark - ViewContent, Horizon - Facebook - Shark - Purchase, GA4 - SS - Send Events, Horizon - Facebook - Shark - AddPaymentInfo",,Ecommerce,
38,cJS - eCommerce - sharkProducts,jsm,,"{""javascript"":""function() {\n  var allProducts = {{cJS - eCommerce - items (normalized)}};\n  var filteredProducts = [];\n\n  for(var i = 0; i < allProducts.length; i++){\n    if (allProducts[i].item_brand === 'Shark') {\n      filteredProducts.push(allProducts[i]);\n    }\n  }\n\n  return filteredProducts;\n}""}",TikTok - Shark - Start Checkout,,,
39,cJS - eCommerce - hasSharkProducts,jsm,,"{""javascript"":""function() {\n  var products = {{cJS - eCommerce - sharkProducts}};\n\n  if (!products || !Array.isArray(products)) {\n      return false;\n  }\n      \n  return products.length > 0;\n}""}",,"GA4 - Shark - add_to_cart, GA4 - Shark - begin_checkout, Shark Products - page_view_delayed, Ecommerce Shark Products - page_view_delayed, GA4 - Shark - purchase, cEvent - page_view - checkout placeOrder - Shark, GA4 - Shark - add_payment_info, Shark Products - view_item, GA4 - Shark - remove_from_cart",,
41,GA4 - Ecommerce - items_quantity,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.items.0.quantity""}","Horizon - Facebook - Shark - Add to Cart, Horizon - Facebook - Shark - Page View, Horizon - Amazon - Purchase Minus Beauty, Horizon - TikTok - Ninja - Add to cart, Horizon - TikTok - Shark - Add to cart, Horizon - Reddit - Ninja - Purchase, Horizon - Facebook - Ninja - Purchase, Horizon - Pinterest - Shark - Add To Cart, Horizon - Facebook - Ninja - Pageview, Horizon - Amazon - Shark - Purchase, Facebook - Shark - Complete Registration, Horizon - Facebook - Ninja - Add to Cart, Horizon - Pinterest - Ninja - Add To Cart, Amazon - Add To Cart, Horizon - Facebook - Ninja - Pageview - Check Order, Horizon - Facebook - Shark - Initiate Checkout, Horizon - Facebook - Ninja - Initiate Checkout, Facebook - Shark - Page View, Horizon - Amazon - Beauty Purchase, Amazon - Signup, Horizon - Facebook - Shark - ViewContent, Horizon - Facebook - Ninja - ViewContent, MiQ - Purchase, Horizon - Facebook - Shark - Purchase, Horizon - Reddit - Shark - Add To Cart, Horizon - Facebook - Shark - Page View - Check Order, Horizon - Facebook - Ninja - SignUp, Amazon - Fire Rotator - View Item, Amazon - Site Search, Horizon - Amazon - Ninja - Purchase, Horizon - Reddit - Ninja - Add To Cart, Horizon - Facebook - Shark - SignUp, Horizon - Facebook - Ninja - Complete Registration, Amazon - Off-Amazon-Purchase, Horizon - Facebook - Shark - AddPaymentInfo, Amazon - Begin Checkout, cHTML Amazon Fire TV Rotator - Purchase/AddToCart, Amazon - Fire Rotator - Page View, Horizon - Reddit - Shark - Purchase",,,
42,DLV - full_category,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.items.0.full_category""}",GA4 - SS - Send Events,,,
43,Regex - Beauty/Home,remm,,"{""setDefaultValue"":""true"",""input"":""{{DLV - full_category}}"",""fullMatch"":""true"",""replaceAfterMatch"":""true"",""ignoreCase"":""true"",""map"":[{""key"":""(.*)The Home(.*)"",""value"":""Home""},{""key"":""(.*)Beauty(.*)"",""value"":""Beauty""}]}","Horizon - Facebook - Shark - Add to Cart, Horizon - Facebook - Shark - ViewContent, Horizon - Facebook - Shark - Purchase, GA4 - SS - Send Events","cEvent - page_view - Shark Home Pages Only, cEvent - page_view - Shark Beauty Pages Only",,
44,cJS - EC Guest Checkout - Email - Hashed,jsm,,"{""javascript"":""function() {\n  // SHA-256 function (corrected)\n  function sha256(ascii) {\n    function rightRotate(value, amount) {\n      return (value >>> amount) | (value << (32 - amount));\n    }\n\n    var mathPow = Math.pow;\n    var maxWord = mathPow(2, 32);\n    var lengthProperty = 'length';\n    var i, j;\n    var result = '';\n\n    var words = [];\n    var asciiBitLength = ascii[lengthProperty] * 8;\n\n    // Remove caching to prevent hash array from growing\n    var hash = [], k = [];\n\n    var primeCounter = 0;\n    var isComposite = {};\n    for (var candidate = 2; primeCounter < 64; candidate++) {\n      if (!isComposite[candidate]) {\n        for (i = candidate * candidate; i < 313; i += candidate) {\n          isComposite[i] = true;\n        }\n        hash[primeCounter] = (mathPow(candidate, 0.5) * maxWord) | 0;\n        k[primeCounter++] = (mathPow(candidate, 1 / 3) * maxWord) | 0;\n      }\n    }\n\n    ascii += '\\x80';\n    while (ascii[lengthProperty] % 64 - 56) ascii += '\\x00';\n    for (i = 0; i < ascii[lengthProperty]; i++) {\n      j = ascii.charCodeAt(i);\n      if (j >> 8) return; // Only accept ASCII\n      words[i >> 2] |= j << ((3 - i) % 4) * 8;\n    }\n    words[words[lengthProperty]] = (asciiBitLength / maxWord) | 0;\n    words[words[lengthProperty]] = asciiBitLength;\n\n    for (j = 0; j < words[lengthProperty];) {\n      var w = words.slice(j, j += 16);\n      var oldHash = hash.slice(0);\n\n      for (i = 16; i < 64; i++) {\n        var w15 = w[i - 15],\n          w2 = w[i - 2];\n\n        w[i] = (((w[i - 16] +\n          (rightRotate(w15, 7) ^ rightRotate(w15, 18) ^ (w15 >>> 3))) | 0) +\n          ((w[i - 7] +\n            (rightRotate(w2, 17) ^ rightRotate(w2, 19) ^ (w2 >>> 10))) | 0)) | 0;\n      }\n\n      var a = hash[0],\n        b = hash[1],\n        c = hash[2],\n        d = hash[3],\n        e = hash[4],\n        f = hash[5],\n        g = hash[6],\n        h = hash[7];\n\n      for (i = 0; i < 64; i++) {\n        var s0 = rightRotate(a, 2) ^ rightRotate(a, 13) ^ rightRotate(a, 22);\n        var maj = (a & b) ^ (a & c) ^ (b & c);\n        var t2 = s0 + maj;\n        var s1 = rightRotate(e, 6) ^ rightRotate(e, 11) ^ rightRotate(e, 25);\n        var ch = (e & f) ^ ((~e) & g);\n        var t1 = h + s1 + ch + k[i] + w[i];\n\n        h = g;\n        g = f;\n        f = e;\n        e = (d + t1) | 0;\n        d = c;\n        c = b;\n        b = a;\n        a = (t1 + t2) | 0;\n      }\n\n      hash[0] = (hash[0] + a) | 0;\n      hash[1] = (hash[1] + b) | 0;\n      hash[2] = (hash[2] + c) | 0;\n      hash[3] = (hash[3] + d) | 0;\n      hash[4] = (hash[4] + e) | 0;\n      hash[5] = (hash[5] + f) | 0;\n      hash[6] = (hash[6] + g) | 0;\n      hash[7] = (hash[7] + h) | 0;\n    }\n\n    for (i = 0; i < 8; i++) {\n      for (j = 3; j >= 0; j--) {\n        var b = (hash[i] >> (j * 8)) & 255;\n        result += ('0' + b.toString(16)).slice(-2);\n      }\n    }\n    return result;\n  }\n\n  // Function to check if a string is a 64-character hexadecimal (possible SHA-256 hash)\n  function isHex64(str) {\n    return /^[a-fA-F0-9]{64}$/.test(str);\n  }\n\n  // Main code\n  if (typeof(Storage) === \""undefined\"") {\n    return 'Storage not supported';\n  }\n\n  var hashedValue = localStorage.getItem('guestEmailHashedValue');\n\n  if (hashedValue !== null && isHex64(hashedValue)) {\n    // Hashed value is already stored\n    return hashedValue;\n  } else {\n    // Retrieve the original email from localStorage\n    var value = localStorage.getItem('guestEmail');\n\n    if (value === null || value === undefined) {\n      return null; // Handle the case where no email is stored\n    }\n\n    // Hash the original email\n    hashedValue = sha256(value);\n\n    // Store the hashed value under a different key without overwriting the original email\n    localStorage.setItem('guestEmailHashedValue', hashedValue);\n\n    // Return the hashed value\n    return hashedValue;\n  }\n}\n""}","Horizon - Facebook - Shark - Add to Cart, cHTML - Extole - AutoPop - new cart, Horizon - Facebook - Shark - Page View, Horizon - TikTok - Ninja - Add to cart, Horizon - Facebook - Ninja - Purchase, Horizon - TikTok - Ninja - Product Detail, Horizon - Facebook - Ninja - Pageview, cHTML - Impact - Purchase, Facebook - Shark - Complete Registration, Horizon - Facebook - Ninja - Add to Cart, Horizon - TikTok - Shark - Purchase, Horizon - Snapchat - Shark - Purchase, Horizon - Facebook - Ninja - Pageview - Check Order, Horizon - Facebook - Shark - Initiate Checkout, Horizon - Pinterest - Shark - Product Page, Horizon - Facebook - Ninja - Initiate Checkout, Facebook - Shark - Page View, Horizon - Facebook - Shark - ViewContent, Horizon - Facebook - Ninja - ViewContent, Horizon - Facebook - Shark - Purchase, Horizon - Facebook - Shark - Page View - Check Order, Horizon - Facebook - Ninja - SignUp, cHTML - Extole - Conversion, Horizon - TikTok - Ninja - Start Checkout, Horizon - TikTok - Ninja - Purchase, Horizon - Facebook - Shark - SignUp, Horizon - Facebook - Ninja - Complete Registration, GA4 - SS - Send Events, Horizon - Facebook - Shark - AddPaymentInfo",,,
45,GA4 - Ecommerce - items_price,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.items.0.price""}","Horizon - Facebook - Shark - Add to Cart, Horizon - Facebook - Shark - Page View, Horizon - TikTok - Shark - Add to cart, Horizon - Pinterest - Shark - Add To Cart, Trade Desk - Purchase - Shark - (HX-Horizon), Horizon - Amazon - Shark - Review Order, Horizon Connect - Event - Product Pages, Amazon - Add To Cart, Horizon - DCM - Shark - Add To Cart, Facebook - Shark - Page View, Amazon - Signup, cHTML - Bazaar Voice - Conversion - Add To Cart, Horizon - Facebook - Shark - ViewContent, Horizon Connect - Event - Add to Cart, Horizon - Reddit - Shark - Add To Cart, Horizon - Facebook - Shark - Page View - Check Order, Horizon Connect - Event - Purchase, Amazon - Fire Rotator - View Item, Amazon - Site Search, Horizon - Amazon - Shark - Add to Cart, Horizon - Snapchat - Shark - Add To Cart, Horizon - Reddit - Ninja - Add To Cart, Amazon - Off-Amazon-Purchase, GA4 - SS - Send Events, Amazon - Begin Checkout, Amazon - Fire Rotator - Page View",,GA4,
49,cJS - Items Price by Brand - Ninja,jsm,,"{""javascript"":""function() {\n\tvar items = {{GA4 - Ecommerce - items}};\n\tvar total = 0;\n\n\tfor (var i = 0; i < items.length; i++) {\n\t\tvar element = items[i];\n\t\tif (element.item_brand === 'Ninja') {\n\t\t\ttotal = total + element.price;\n\t\t}\n\t}\n\n\treturn total;\n}""}","Horizon - Amazon - Ninja - Review Order, Horizon - Snapchat - Ninja - Add To Cart, Horizon - TikTok - Ninja - Add to cart, Horizon - Reddit - Ninja - Purchase, Horizon - Snapchat - Ninja - Purchase, Horizon - Facebook - Ninja - Purchase, Horizon (HX) - Ninja - Trade Desk - Purchase, Horizon - TikTok - Ninja - Product Detail, Horizon - Facebook - Ninja - Pageview, Horizon - Snapchat - Ninja - Waitlist, Horizon - TikTok - Ninja - Waitlist, Horizon - Bing - Ninja - Purchase, Horizon - Facebook - Ninja - Add to Cart, Horizon - Pinterest - Ninja - Add To Cart, Horizon - Google Ads - Ninja - Conversion, Horizon - Facebook - Ninja - Initiate Checkout, Horizon - Amazon - Ninja - Add to Cart, Horizon - Facebook - Ninja - ViewContent, cHTML - test purchase, Horizon - Facebook - Ninja - SignUp, Horizon - DCM - Ninja - Add To Cart, Horizon - Amazon - Ninja - Purchase, Horizon - TikTok - Ninja - Start Checkout, Horizon - DCM - Ninja - Purchase, Horizon - TikTok - Ninja - Purchase, Horizon - Facebook - Ninja - Complete Registration, Horizon - DCM - Ninja - Waitlist, Horizon - Pinterest - Ninja - Purchase, Horizon - Amazon - Ninja - Checkout",,,
50,GA4 - Ecommerce - item_category,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.items.0.item_category""}","Horizon - Amazon - Ninja - Review Order, Horizon - DCM - Shark - Purchase, Horizon - TikTok - Ninja - Add to cart, Horizon - TikTok - Shark - Add to cart, DCM - Shark - Checkout (PMG), DCM - Shark - Add To Cart (PMG), Horizon - Facebook - Ninja - Purchase, Horizon - Reddit - Shark - View Item, Horizon (HX) - Ninja - Trade Desk - Purchase, Trade Desk - Purchase - Shark - (HX-Horizon), Horizon - TikTok - Ninja - Product Detail, Horizon - Amazon - Shark - Checkout, Horizon - Facebook - Ninja - Pageview, Horizon - Amazon - Shark - Review Order, Horizon - Facebook - Ninja - Add to Cart, Horizon Connect - Event - Product Pages, Amazon - Add To Cart, Horizon - Snapchat - Shark - View Content, Horizon - DCM - Shark - Add To Cart, Horizon - Pinterest - Shark - Product Page, Horizon - Facebook - Ninja - Initiate Checkout, DCM - Waitlist (PMG), Amazon - Signup, Horizon - TikTok - Shark - Product Detail, Horizon - Amazon - Ninja - Add to Cart, Horizon - Facebook - Ninja - ViewContent, Horizon Connect - Event - Add to Cart, DCM - Shark - Purchase (PMG), Horizon - Reddit - Shark - Add To Cart, Horizon - Facebook - Ninja - SignUp, DCM - All Pages Standard (PMG), Horizon Connect - Event - Purchase, Horizon - DCM - Ninja - Add To Cart, Amazon - Fire Rotator - View Item, Amazon - Site Search, Horizon - Amazon - Shark - Add to Cart, Horizon - Snapchat - Ninja - View Content, Horizon - DCM - Ninja - Purchase, DCM - All Pages Unique (PMG), Horizon - Facebook - Ninja - Complete Registration, Amazon - Off-Amazon-Purchase, ContentSquare - Dynamic Ecomm Variable, Horizon - DCM - Ninja - Waitlist, Amazon - Begin Checkout, cHTML Amazon Fire TV Rotator - Purchase/AddToCart, Amazon - Fire Rotator - Page View, cHTML - Amazon Fire TV Rotator - View Item, Horizon - Reddit - Shark - Purchase, Horizon - Amazon - Ninja - Checkout, Horizon - SharkNinja - Purchase Confirmation",GA4 - add_to_cart - Exclude Accessories,,
51,GA4 - Ecommerce - 1st item - item_name,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.items.0.item_name""}","Horizon - Amazon - Ninja - Review Order, Horizon - DCM - Shark - Purchase, Horizon - Amazon - Purchase Minus Beauty, Horizon - TikTok - Ninja - Add to cart, Horizon - TikTok - Shark - Add to cart, DCM - Shark - Add To Cart (PMG), Horizon - Pinterest - Shark - Add To Cart, Horizon (HX) - Ninja - Trade Desk - Purchase, Trade Desk - Purchase - Shark - (HX-Horizon), Horizon - TikTok - Ninja - Product Detail, Horizon - Amazon - Shark - Checkout, Horizon - Amazon - Shark - Review Order, Horizon - Amazon - Shark - Purchase, Horizon - Pinterest - Ninja - Add To Cart, Amazon - Add To Cart, Horizon - DCM - Shark - Add To Cart, DCM - Waitlist (PMG), Horizon - Amazon - Beauty Purchase, Amazon - Signup, Horizon - TikTok - Shark - Product Detail, Horizon - Amazon - Ninja - Add to Cart, Horizon - ArtsAI - Shark - Purchase, cHTML - Bazaar Voice - Conversion - View Item, DCM - All Pages Standard (PMG), Horizon - DCM - Ninja - Add To Cart, Amazon - Fire Rotator - View Item, Horizon - ArtsAI - Ninja - Purchase, Amazon - Site Search, Horizon - Amazon - Shark - Add to Cart, Horizon - Amazon - Ninja - Purchase, Horizon - DCM - Ninja - Purchase, DCM - All Pages Unique (PMG), Amazon - Off-Amazon-Purchase, ContentSquare - Dynamic Ecomm Variable, GA4 - SS - Send Events, Horizon - DCM - Ninja - Waitlist, Amazon - Begin Checkout, cHTML Amazon Fire TV Rotator - Purchase/AddToCart, Amazon - Fire Rotator - Page View, Horizon - Amazon - Ninja - Checkout, Horizon - SharkNinja - Purchase Confirmation",,,
52,cJS - data-checkout-stage,jsm,,"{""javascript"":""function() {\n  var el = document.querySelector('.data-checkout-stage');\n  if (!el) {\n    return;\n  }\n  \n  if (!el.hasAttribute('data-checkout-stage')) {\n    return;\n  }\n  \n  return el.getAttribute('data-checkout-stage');\n}""}",,"cEvent - page_view - checkout placeOrder - Ninja, cEvent - page_view - checkout placeOrder - Shark",,
55,dlv - page_type,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""page_type""}",,,,Unused Variable
56,GA4 - page_type,jsm,,"{""javascript"":""function() {\n  // Get the GA4 page_type value\n  var pageType = {{dlv - page_type}};\n  \n  // Get the current page URL\n  var pageUrl = {{Page URL}};\n  \n  // Check if page_type is \""Search\""\n  if (pageType === \""Search\"") {\n    // Check if URL contains \""search?q\""\n    if (pageUrl.indexOf(\""search?q\"") !== -1) {\n      return \""Search\"";\n    } else {\n      return \""Category\"";\n    }\n  } else {\n    // Pass through the original value if not \""Search\""\n    return pageType;\n  }\n}""}","Horizon - Amazon - Ninja - Review Order, Horizon - DCM - Shark - Checkout, Horizon - Amazon - Shark - View Item, Horizon - DCM - Shark - Purchase, Horizon - DCM - Shark - All Pages Standard, DCM - Shark - Checkout (PMG), DCM - Shark - Add To Cart (PMG), Horizon - Amazon - Ninja - PageView - Check Order, Horizon - DCM - Ninja - Homepage - Unique, GA4 - page_view, Horizon - Amazon - Shark - PageView - Check Order, Horizon - Amazon - Shark - Checkout, GA4 - Configuration - Support Sub-Domain, Horizon - Amazon - Shark - Review Order, Horizon - DCM - Shark - Email, Horizon - Amazon - Shark - PageView, Horizon Connect - Event - Product Pages, Horizon - DCM - Shark - Homepage - Unique, Horizon - DCM - Shark - Add To Cart, Horizon - DCM - Shark - Homepage - Standard, DCM - Shark - Email (PMG), DCM - Shark - Homepage - Unique (PMG), DCM - Waitlist (PMG), Horizon - Amazon - Ninja - Add to Cart, ContentSquare Main Tag, Horizon - DCM - Shark - Waitlist, Horizon Connect - Event - Add to Cart, DCM - Shark - Purchase (PMG), Horizon - Amazon - Ninja - View Item, Horizon - DCM - Shark - Product Pages - Standard, DCM - Shark - View Product Page (PMG), DCM - All Pages Standard (PMG), cHTML Amazon Fire TV Rotator - PageView, Horizon Connect - Event - Purchase, Horizon - DCM - Ninja - Add To Cart, Horizon - DCM - Ninja - Homepage - Standard, GA4 - Configuration, Horizon - DCM - Shark - All Pages Unique, Horizon - Amazon - Shark - Add to Cart, Horizon - DCM - Ninja - Email, DCM - Shark - Homepage - Standard (PMG), Horizon - DCM - Ninja - Purchase, DCM - All Pages Unique (PMG), GA4 - Event - ctas, Horizon - DCM - Ninja - All Pages Unique, Horizon - DCM - Ninja - View Product Page, Horizon - DCM - Ninja - Waitlist, Amazon - Fire Rotator - Page View, Horizon - Amazon - Ninja - PageView, Horizon - DCM - Ninja - All Pages Standard, Horizon - DCM - Ninja - Checkout, Horizon - Amazon - Ninja - Checkout, Horizon - SharkNinja - Purchase Confirmation","Custom - page_view_delayed - PV - Homepage, Custom - first_pageload - Category, cEvent - page_view_delayed - Category, Custom - first_pageload - PV - Homepage, cEvent - OneTrustLoaded - Category pages, Custom - page_view All PDP pages, Custom page_view_delayed - PDP pages only, Custom - first_pageload All PDP pages",GA4,
60,dlv - filterValues,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""filterValues""}",,,,Unused Variable
61,dlv - filter_name,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""filter_name""}",,,,Unused Variable
63,GA4 - navigation_type,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""navigation_type""}",GA4 - Event - navigation_click,,,
66,dlv - user_id,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""user_id""}","cHTML - Extole - AutoPop - new cart, cHTML - Impact - Identify, GA4 - page_view, GA4 - Configuration - Support Sub-Domain, cHTML - Impact - Purchase, GA4 - Configuration, GA4 - Event - user_login, GA4 - SS - Send Events, GA4 - Ecommerce - purchase",,,
67,cJS - EC Guest First Name - Hashed,jsm,,"{""javascript"":""function() {\n  if (typeof(Storage) === \""undefined\"") {\n    return null; // Storage not supported\n  }\n\n  // Retrieve guest name from localStorage\n  var guestName = localStorage.getItem('guestFirstName');\n  if (!guestName) return null; // Return null if no value is found\n\n  // Check if guestName is already hashed (assuming 64-character hex for SHA-256)\n  var isHashed = /^[a-f0-9]{64}$/.test(guestName);\n  if (isHashed) {\n    return guestName; // Return as-is if already hashed\n  }\n\n  // Helper function to convert a buffer to a hex string\n  function bufferToHex(buffer) {\n    var hexArray = Array.from(new Uint8Array(buffer));\n    return hexArray.map(function(b) { return b.toString(16).padStart(2, '0'); }).join('');\n  }\n\n  // Hashing function using SHA-256, returns a promise\n  function hashValue(value) {\n    return crypto.subtle.digest('SHA-256', new TextEncoder().encode(value))\n      .then(bufferToHex)\n      .then(function(hash) {\n        // Store the hashed name in localStorage and return it\n        localStorage.setItem('guestFirstName', hash);\n        return hash;\n      });\n  }\n\n  // Perform hashing if supported, or return null if not\n  if (crypto && crypto.subtle && crypto.subtle.digest) {\n    return hashValue(guestName);\n  } else {\n    return null; // Hashing not supported\n  }\n}\n\n""}","cHTML - Extole - AutoPop - new cart, cHTML - Extole - Conversion",,,
68,cJS - EC Guest Last Name - Hashed,jsm,,"{""javascript"":""function() {\n  if (typeof(Storage) === \""undefined\"") {\n    return null; // Storage not supported\n  }\n\n  // Retrieve guestLastName from localStorage\n  var guestLastName = localStorage.getItem('guestLastName');\n  if (!guestLastName) return null; // Return null if no value is found\n\n  // Check if guestLastName is already hashed (64-character hex for SHA-256)\n  var isHashed = /^[a-f0-9]{64}$/.test(guestLastName);\n  if (isHashed) {\n    return guestLastName; // Return as-is if already hashed\n  }\n\n  // Helper function to convert a buffer to a hex string\n  function bufferToHex(buffer) {\n    var hexArray = Array.from(new Uint8Array(buffer));\n    return hexArray.map(function(b) { return b.toString(16).padStart(2, '0'); }).join('');\n  }\n\n  // Hashing function using SHA-256, returns a promise\n  function hashValue(value) {\n    return crypto.subtle.digest('SHA-256', new TextEncoder().encode(value))\n      .then(bufferToHex)\n      .then(function(hash) {\n        // Store the hashed name in localStorage and return it\n        localStorage.setItem('guestLastName', hash);\n        return hash;\n      });\n  }\n\n  // Perform hashing if supported, or return null if not\n  if (crypto && crypto.subtle && crypto.subtle.digest) {\n    return hashValue(guestLastName);\n  } else {\n    return null; // Hashing not supported\n  }\n}\n\n""}","cHTML - Extole - AutoPop - new cart, cHTML - Extole - Conversion",,,
71,cJS - Product Price,jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var price = [];\n  for(var i = 0; i < products.length; i++){\n    price[i] = products[i].price;\n  }\n  return price.join(',');\n}""}",,,,Unused Variable
72,cJS - List of SKUs,jsm,,"{""javascript"":""function generateSkuList(){\n  var products = {{GA4 - Ecommerce - items}};\n  var skuList = [];\n\n  for(var i = 0; i < products.length; i++){\n    if(products[i].category != 'main-product'){\n      skuList.push(\""'\"" + products[i].item_id + \""'\"");\n    }\n  }\n\n  return skuList.join(',');\n}""}","cHTML - Clinch - View Cart, Horizon - Amazon - Purchase Minus Beauty, cHTML - Clinch - Initiate Checkout, Horizon - Reddit - Shark - View Item, Horizon (HX) - Ninja - Trade Desk - Purchase, Trade Desk - Purchase - Shark - (HX-Horizon), Horizon - Amazon - Shark - Purchase, cHTML - Clinch - Purchase, cHTML - Clinch - Add to Cart, cHTML - Clinch - Category Page, Horizon - Amazon - Beauty Purchase, cHTML - Clinch - Remove From Cart, MiQ - Purchase, cHTML - Clinch - ViewContent (PDP), Horizon - Reddit - Shark - Add To Cart, Horizon - Amazon - Ninja - Purchase, cHTML - Clinch - Search Results Page, Horizon - Reddit - Shark - Purchase, Horizon - SharkNinja - Purchase Confirmation",,,
75,DLV - webVitalsMeasurement.delta,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""webVitalsMeasurement.delta""}",,,,Unused Variable
76,GA4 - Ecommerce - 1st item - item_id,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.items.0.item_id""}","Horizon - Snapchat - Ninja - Add To Cart, DCM - Shark - Add To Cart (PMG), Horizon - Facebook - Ninja - Purchase, Horizon - Pinterest - Shark - Add To Cart, Horizon - Facebook - Ninja - Pageview, Horizon - Snapchat - Ninja - Waitlist, Horizon - TikTok - Ninja - Waitlist, Facebook - Shark - Complete Registration, Horizon - Facebook - Ninja - Add to Cart, Horizon - Pinterest - Ninja - Add To Cart, Horizon Connect - Event - Product Pages, Horizon - Facebook - Ninja - Pageview - Check Order, Horizon - Snapchat - Shark - View Content, Horizon - DCM - Shark - Add To Cart, Horizon (HX) - Ninja - Trade Desk - Add to Cart, Horizon - Pinterest - Shark - Product Page, Horizon - Facebook - Ninja - Initiate Checkout, DCM - Waitlist (PMG), Horizon - Facebook - Ninja - ViewContent, Horizon Connect - Event - Add to Cart, Horizon - Facebook - Ninja - SignUp, DCM - All Pages Standard (PMG), Horizon Connect - Event - Purchase, Horizon - DCM - Ninja - Add To Cart, Horizon - ArtsAI - Ninja - Purchase, Horizon - Snapchat - Ninja - View Content, Horizon - Snapchat - Shark - Add To Cart, DCM - All Pages Unique (PMG), Horizon - Facebook - Shark - SignUp, Horizon - Facebook - Ninja - Complete Registration, ContentSquare - Dynamic Ecomm Variable, GA4 - SS - Send Events, Horizon - DCM - Ninja - Waitlist, Trade Desk - Add to Cart - Shark - (HX-Horizon)",GA4 - purchase Only OO101B,,
77,cJS - item_id - lowercase,jsm,,"{""javascript"":""function() {\n  var itemId = {{GA4 - Ecommerce - 1st item - item_id}};\n  if (typeof itemId === 'string') {\n    return itemId.toLowerCase();\n  } else {\n    return '';\n  }\n}\n""}","Horizon - Facebook - Shark - Page View, Facebook - Shark - Page View, Horizon - Facebook - Shark - Page View - Check Order",,,
79,Cookie - Meta _fbp,k,,"{""decodeCookie"":""false"",""name"":""_fbp""}","Horizon - Facebook - Shark - Page View, Horizon - Facebook - Ninja - Purchase, Horizon - Facebook - Ninja - Add to Cart, Horizon - Facebook - Ninja - Initiate Checkout, Facebook - Shark - Page View, Horizon - Facebook - Ninja - ViewContent, Horizon - Facebook - Shark - Page View - Check Order, GA4 - SS - Send Events",,,
81,Cookie - Metta fbc,k,,"{""decodeCookie"":""false"",""name"":""_fbc""}","Horizon - Facebook - Shark - Page View, Horizon - Facebook - Ninja - Purchase, Facebook - Shark - Complete Registration, Horizon - Facebook - Ninja - Add to Cart, Horizon - Facebook - Ninja - Initiate Checkout, Facebook - Shark - Page View, Horizon - Facebook - Shark - ViewContent, Horizon - Facebook - Ninja - ViewContent, Horizon - Facebook - Shark - Purchase, Horizon - Facebook - Shark - Page View - Check Order, Horizon - Facebook - Ninja - Complete Registration, GA4 - SS - Send Events",,,
88,cJS - EC Guest Checkout - Phone Number,jsm,,"{""javascript"":""function() {\n  // Check if storage is supported\n  if (typeof(Storage) === \""undefined\"") {\n    // Return a default value or handle the case when storage is not supported\n    return 'Storage not supported';\n  }\n    \n  // Retrieve the value from session storage\n  var guestPhoneNumber = localStorage.getItem('guestPhoneNumber');\n\n  // Return the value\n  return guestPhoneNumber;\n\n}\n\n""}",Horizon - TikTok - Shark - Purchase,,,
89,Floodlight EC Data,awec,,"{""mode"":""MANUAL"",""phone_number"":""{{cJS - EC Guest Checkout - Phone Number}}"",""email"":""{{cJS - EC Guest Checkout - Email - Hashed}}""}","Horizon - DCM - Shark - Checkout, Horizon - DCM - Shark - Purchase, Horizon - DCM - Shark - All Pages Standard, DCM - Shark - Checkout (PMG), DCM - Shark - Add To Cart (PMG), Horizon - DCM - Ninja - Homepage - Unique, Horizon - DCM - Shark - Email, Horizon - DCM - Shark - Homepage - Unique, Horizon - DCM - Shark - Add To Cart, Horizon - DCM - Shark - Homepage - Standard, DCM - Shark - Email (PMG), DCM - Shark - Homepage - Unique (PMG), DCM - Waitlist (PMG), Horizon - DCM - Shark - Waitlist, DCM - Shark - Purchase (PMG), Horizon - DCM - Shark - Product Pages - Standard, DCM - Shark - View Product Page (PMG), DCM - All Pages Standard (PMG), Horizon - DCM - Ninja - Add To Cart, Horizon - DCM - Ninja - Homepage - Standard, Horizon - DCM - Shark - All Pages Unique, Horizon - DCM - Ninja - Email, DCM - Shark - Homepage - Standard (PMG), Horizon - DCM - Ninja - Purchase, DCM - All Pages Unique (PMG), Horizon - DCM - Ninja - All Pages Unique, Horizon - DCM - Ninja - View Product Page, Horizon - DCM - Ninja - Waitlist, Horizon - DCM - Ninja - All Pages Standard, Horizon - DCM - Ninja - Checkout",,,
91,JSV - Page Title,j,,"{""name"":""document.title""}","Horizon - DCM - Shark - Checkout, Horizon - DCM - Shark - Purchase, Horizon - DCM - Shark - All Pages Standard, DCM - Shark - Checkout (PMG), DCM - Shark - Add To Cart (PMG), Horizon - DCM - Ninja - Homepage - Unique, Horizon (HX) - Ninja - Trade Desk - Purchase, Trade Desk - Purchase - Shark - (HX-Horizon), Horizon - DCM - Shark - Email, Horizon Connect - Event - Product Pages, Horizon - DCM - Shark - Homepage - Unique, Horizon - DCM - Shark - Add To Cart, Horizon - DCM - Shark - Homepage - Standard, DCM - Shark - Email (PMG), DCM - Shark - Homepage - Unique (PMG), DCM - Waitlist (PMG), Horizon - DCM - Shark - Waitlist, Horizon Connect - Event - Add to Cart, DCM - Shark - Purchase (PMG), Horizon - DCM - Shark - Product Pages - Standard, DCM - Shark - View Product Page (PMG), DCM - All Pages Standard (PMG), Horizon Connect - Event - Purchase, Horizon - DCM - Ninja - Add To Cart, Horizon - DCM - Ninja - Homepage - Standard, Horizon - DCM - Shark - All Pages Unique, Horizon - DCM - Ninja - Email, DCM - Shark - Homepage - Standard (PMG), Horizon - DCM - Ninja - Purchase, DCM - All Pages Unique (PMG), Horizon - DCM - Ninja - All Pages Unique, Horizon - DCM - Ninja - View Product Page, GA4 - SS - Send Events, Horizon - DCM - Ninja - Waitlist, Horizon - DCM - Ninja - All Pages Standard, Horizon - DCM - Ninja - Checkout, Horizon - SharkNinja - Purchase Confirmation",,,
97,cJS - view_item dataLayer - items,jsm,,"{""javascript"":""/* traverse the list of dataLayer events\n * pulling out any that are `view_item`\n * and then returning the first instance's\n * ecommerce.items array\n *\n * this is usefule for when the ecommerce.items of the \n * current dataLayer is overwritten by another list\n * typically from a `view_item_list`, et al.\n */\nfunction () {\n  // Look through dataLayer history for the last view_item event\n  var dataLayer = window.dataLayer || [];\n  var lastViewItemEvent = null;\n  \n  // Search backwards through dataLayer\n  for (var i = dataLayer.length - 1; i >= 0; i--) {\n    if (dataLayer[i].event === 'view_item' && dataLayer[i].ecommerce && dataLayer[i].ecommerce.items) {\n      lastViewItemEvent = dataLayer[i];\n      break;\n    }\n  }\n  \n  if (lastViewItemEvent && lastViewItemEvent.ecommerce.items) {\n    return lastViewItemEvent.ecommerce.items;\n  }\n  \n  return [];\n}""}","GA4 - Ecommerce - view_item, GA4 - SS - Send Events",,,
98,cJS - view_item dataLayer - sharkProducts,jsm,,"{""javascript"":""function() {\n  var allProducts = {{cJS - view_item dataLayer - items}};\n  var filteredProducts = [];\n\n  for(var i = 0; i < allProducts.length; i++){\n    if (allProducts[i].item_brand === 'Shark') {\n      filteredProducts.push(allProducts[i]);\n    }\n  }\n\n  return filteredProducts;\n}""}",,,,Unused Variable
99,cJS - view_item dataLayer - hasSharkProducts,jsm,,"{""javascript"":""function() {\n  var products = {{cJS - view_item dataLayer - sharkProducts}};\n\n  if (!products || !Array.isArray(products)) {\n      return false;\n  }\n      \n  return products.length > 0;\n}""}",,Shark Products - cEvent - Group - page_load + view_item,,
101,cJS - view_item dataLayer - 1st item,jsm,,"{""javascript"":""function() {\n  var items = {{cJS - view_item dataLayer - items}};\n  if (!items) {\n    return;\n  }\n\n  return items[0];\n}""}",,,,Unused Variable
102,cJS - view_item dataLayer - item_category,jsm,,"{""javascript"":""function() {\n  var item = {{cJS - view_item dataLayer - 1st item}};\n  if (!item) {\n    return;\n  }\n\n  return item.item_category;\n}\n""}","Horizon - Amazon - Shark - View Item, Horizon - Amazon - Ninja - View Item, Horizon - DCM - Shark - Product Pages - Standard, DCM - Shark - View Product Page (PMG), Horizon - DCM - Ninja - View Product Page",,,
103,cJS - view_item dataLayer - item_name,jsm,,"{""javascript"":""function() {\n  var item = {{cJS - view_item dataLayer - 1st item}};\n  if (!item) {\n    return;\n  }\n\n  return item.item_name;\n}\n""}","Horizon - Amazon - Shark - View Item, Horizon - Pinterest - Shark - Product Page, Horizon - Amazon - Ninja - View Item, Horizon - DCM - Shark - Product Pages - Standard, DCM - Shark - View Product Page (PMG), Horizon - Pinterest - Ninja - Product Page, Horizon - DCM - Ninja - View Product Page",,,
106,Page URL w/o special characters,jsm,,"{""javascript"":""function() {\n  var title = {{Page URL}};\n  return title.replace(/ |\\/|:|-|,|\""|'/g,'_');\n}""}",,,,Unused Variable
112,cJS - Dynamic eCommerce Items,jsm,,"{""javascript"":""function () {\n  /**\n    * this helper function evaluates the page_type for 'pdp'\n    * if that is true it parses the dataLayer events list for the most recent\n    * view_item event and returns that event's ecommerce.items list\n    * otherwise it will return the current dataLayer instances ecommerce.items list\n    *\n    * it should be noted that this only really works after page_load occurs\n    *\n    **/\n  var page_type = {{GA4 - page_type}};\n  if (page_type === 'pdp') {\n    return {{cJS - view_item dataLayer - items}};\n  }\n  \n  return {{GA4 - Ecommerce - items}};\n}""}",,,,Unused Variable
113,cJS - Dynamic eCommerce - item_name,jsm,,"{""javascript"":""function () {\n  var items = {{cJS - Dynamic eCommerce Items}};\n  if (Array.isArray(items) && items.length > 0) {\n    return items[0].item_name;\n  }\n  \n  return undefined;\n}""}",Amazon - Page View,,,
116,DLV - payment_type,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.payment_type""}",cHTML - capture paymentType helper,,,
118,DLV - link_url,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""link_url""}",GA4 - Event - navigation_click,,,
120,GA4 - MeasurementId,c,G-W6ND2QG0W7,"{""value"":""G-W6ND2QG0W7""}","GA4 - Event - navigation_click, GA4 - Event - register_product, GA4 - Ecommerce - view_cart, GA4 - Ecommerce - select_item, GA4 - page_view, GA4 - Configuration - Support Sub-Domain, GA4 - Ecommerce - remove_from_cart, GA4 - Event - video_progress, GA4 - Event - video_in_viewport, GA4 - Event - email_signup, GA4 - Event - Quick Filter Click, GA4 - Event - outbound_clicks, GA4 - Event - Dynamic Yield, GA4 - Event - country_selector_interaction, GA4 - Ecommerce - add_to_cart, GA4 - Ecommerce - view_item, GA4 - Event - popup, GA4 - Event - payment_failure, GA4 - Event - notify_me, GA4 - Ecommerce - add_payment_info, GA4 - Event - riskified_advise_check, GA4 - Ecommerce - view_item_list, GA4 - Event - filter_click, GA4 - Configuration, GA4 - Event - view_search_results, GA4 - Promo Code Apply, GA4 - Event - scroll, GA4 - Event - ctas, GA4 - Event - compare_model, GA4 - Event - time_on_site_60, GA4 - Event - video, GA4 - Event - user_login, GA4 - Event - new_account, GA4 - Event - products_in_view, GA4 - Ecommerce - purchase, GA4 - Ecommerce - add_shipping_info, GA4 - Ecommerce - begin_checkout, GA4 - Event - HandyBuddy Modal",,GA4,
121,DLV - navigation_item_name,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""navigation_item_name""}",GA4 - Event - navigation_click,,,
124,Search Term - q,u,,"{""component"":""QUERY"",""queryKey"":""q""}",cHTML - Clinch - Search Results Page,,,
125,cJS - eCommerce - computed item value,jsm,,"{""javascript"":""function () {\n  /**\n    * this is a helper function to retrieve the ecommerce value\n    * but on certain events there is NO ecommerce value\n    * so we derive the value from the first ecommerce.items item\n    * and compute it's value (price less discount) times quantity\n    **/\n  var ecValue = {{GA4 - Ecommerce - value}};\n  if (ecValue) {\n    return ecValue;\n  }\n\n  var items = {{GA4 - Ecommerce - items}};\n  \n  // Check if items is an array and has at least one\n  if (Array.isArray(items) && items.length > 0) {\n    // Return an array containing only the first item\n    var item = items[0];\n    \n    return (item.price - item.discount) * item.quantity;\n  }\n\n  return 0;\n}""}","DCM - Shark - Add To Cart (PMG), GA4 - Ecommerce - remove_from_cart, GA4 - Ecommerce - add_to_cart",,,
126,cJS - Waitlist Button ID,jsm,,"{""javascript"":""function() {\n\tvar el = {{Click Element}};\n\tif (!el.closest('form')) {\n\t\treturn 'none';\n\t}\n\treturn el.getAttribute('data-testing-id') ? el.getAttribute('data-testing-id') : 'none';\n}""}",,,,Unused Variable
131,dlv - link_text,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""link_text""}",,,,Unused Variable
132,GA4 - Ecommerce - purchased_as,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.purchased_as""}","Horizon - DCM - Shark - Purchase, GA4 - SS - Send Events, GA4 - Ecommerce - purchase, Horizon - SharkNinja - Purchase Confirmation",,,
135,cJS - List of SKUs - Shark,jsm,,"{""javascript"":""function (){\n  var products = {{cJS - eCommerce - sharkProducts}};\n  var skuList = [];\n\n  for(var i = 0; i < products.length; i++){\n    if(products[i].category != 'main-product'){\n      skuList.push(\""'\"" + products[i].item_id + \""'\"");\n    }\n  }\n\n  return skuList.join(',');\n}""}",Horizon - DCM - Shark - Purchase,,,
136,cJS - Items Price by Brand - Shark,jsm,,"{""javascript"":""function() {\n\tvar items = {{GA4 - Ecommerce - items}};\n\tvar total = 0;\n\n\tfor (var i = 0; i < items.length; i++) {\n\t\tvar element = items[i];\n\t\tif (element.item_brand === 'Shark') {\n\t\t\ttotal = total + element.price;\n\t\t}\n\t}\n\n\treturn total;\n}""}","Horizon - DCM - Shark - Purchase, Trade Desk - Purchase - Shark - (HX-Horizon), Horizon - Amazon - Shark - Checkout, Horizon - Amazon - Shark - Purchase, Horizon - TikTok - Shark - Purchase, Horizon - Snapchat - Shark - Purchase, Horizon - Facebook - Shark - Initiate Checkout, Horizon - Pinterest - Shark - Purchase, Horizon - TikTok - Shark - Start Checkout, Horizon - Facebook - Shark - Purchase, cHTML - test purchase, Horizon - ArtsAI - Shark - Purchase, Horizon - Bing - Shark - Purchase, Horizon - Reddit - Shark - Purchase, Horizon - Google Ads - Shark - Conversion",,,
142,cJS - TikTok - line items,jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var prodinfo = [];\n\n  for(var i = 0; i < products.length; i++){\n        if(products[i].category != 'main-product'){\n          prodinfo.push({\n          'price': products[i].price,\n          'quantity': products[i].quantity,\n          'content_name': products[i].item_name,\n          'content_id': products[i].item_id,  \n          'content_category': products[i].item_category\n        });\n        };\n    }\n  return prodinfo;\n}""}","Horizon - TikTok - Ninja - Add to cart, Horizon - TikTok - Shark - Add to cart, Horizon - TikTok - Ninja - Product Detail, Horizon - TikTok - Shark - Purchase, Horizon - TikTok - Shark - Start Checkout, Horizon - TikTok - Shark - Product Detail, Horizon - TikTok - Ninja - Start Checkout, Horizon - TikTok - Ninja - Purchase",,TikTok,
143,cJS - TikTok Event ID,jsm,,"{""javascript"":""function() {\n  var eventId = {{event ID}}; // Replace with the actual GTM variable reference\n  return eventId.replace(/_/g, ''); // This will remove all underscores\n}\n""}","Horizon - TikTok - Ninja - Add to cart, Horizon - TikTok - Shark - Add to cart, Horizon - TikTok - Ninja - Product Detail, Horizon - TikTok - Shark - Purchase, Horizon - TikTok - Shark - Start Checkout, Horizon - TikTok - Shark - Product Detail, Horizon - TikTok - Ninja - Start Checkout, Horizon - TikTok - Ninja - Purchase, GA4 - SS - Send Events",,,
144,GA4 - ga_id,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ga_id""}","cHTML - Impact - Identify, GA4 - page_view, GA4 - Configuration - Support Sub-Domain, cHTML - Impact - Purchase, GA4 - Configuration, GA4 - SS - Send Events, cHTML Amazon Fire TV Rotator - Purchase/AddToCart",,GA4,
145,cJS - GA4 - ga_id - hashed,jsm,,"{""javascript"":""function() {\n  // SHA-256 function (unchanged from your original)\n  function sha256(ascii) {\n    function rightRotate(value, amount) {\n      return (value >>> amount) | (value << (32 - amount));\n    }\n\n    var mathPow = Math.pow;\n    var maxWord = mathPow(2, 32);\n    var lengthProperty = 'length';\n    var i, j;\n    var result = '';\n\n    var words = [];\n    var asciiBitLength = ascii[lengthProperty] * 8;\n\n    var hash = [], k = [];\n\n    var primeCounter = 0;\n    var isComposite = {};\n    for (var candidate = 2; primeCounter < 64; candidate++) {\n      if (!isComposite[candidate]) {\n        for (i = candidate * candidate; i < 313; i += candidate) {\n          isComposite[i] = true;\n        }\n        hash[primeCounter] = (mathPow(candidate, 0.5) * maxWord) | 0;\n        k[primeCounter++] = (mathPow(candidate, 1 / 3) * maxWord) | 0;\n      }\n    }\n\n    ascii += '\\x80';\n    while (ascii[lengthProperty] % 64 - 56) ascii += '\\x00';\n    for (i = 0; i < ascii[lengthProperty]; i++) {\n      j = ascii.charCodeAt(i);\n      if (j >> 8) return;\n      words[i >> 2] |= j << ((3 - i) % 4) * 8;\n    }\n    words[words[lengthProperty]] = (asciiBitLength / maxWord) | 0;\n    words[words[lengthProperty]] = asciiBitLength;\n\n    for (j = 0; j < words[lengthProperty];) {\n      var w = words.slice(j, j += 16);\n      var oldHash = hash.slice(0);\n\n      for (i = 16; i < 64; i++) {\n        var w15 = w[i - 15],\n            w2 = w[i - 2];\n\n        w[i] = (((w[i - 16] +\n          (rightRotate(w15, 7) ^ rightRotate(w15, 18) ^ (w15 >>> 3))) | 0) +\n          ((w[i - 7] +\n            (rightRotate(w2, 17) ^ rightRotate(w2, 19) ^ (w2 >>> 10))) | 0)) | 0;\n      }\n\n      var a = hash[0], b = hash[1], c = hash[2], d = hash[3];\n      var e = hash[4], f = hash[5], g = hash[6], h = hash[7];\n\n      for (i = 0; i < 64; i++) {\n        var s0 = rightRotate(a, 2) ^ rightRotate(a, 13) ^ rightRotate(a, 22);\n        var maj = (a & b) ^ (a & c) ^ (b & c);\n        var t2 = s0 + maj;\n        var s1 = rightRotate(e, 6) ^ rightRotate(e, 11) ^ rightRotate(e, 25);\n        var ch = (e & f) ^ ((~e) & g);\n        var t1 = h + s1 + ch + k[i] + w[i];\n\n        h = g; g = f; f = e;\n        e = (d + t1) | 0;\n        d = c; c = b; b = a;\n        a = (t1 + t2) | 0;\n      }\n\n      hash[0] = (hash[0] + a) | 0;\n      hash[1] = (hash[1] + b) | 0;\n      hash[2] = (hash[2] + c) | 0;\n      hash[3] = (hash[3] + d) | 0;\n      hash[4] = (hash[4] + e) | 0;\n      hash[5] = (hash[5] + f) | 0;\n      hash[6] = (hash[6] + g) | 0;\n      hash[7] = (hash[7] + h) | 0;\n    }\n\n    for (i = 0; i < 8; i++) {\n      for (j = 3; j >= 0; j--) {\n        var b = (hash[i] >> (j * 8)) & 255;\n        result += ('0' + b.toString(16)).slice(-2);\n      }\n    }\n    return result;\n  }\n\n  // Get the GA4 ID from the GTM variable\n  var gaId = {{GA4 - ga_id}};\n\n  if (typeof gaId !== 'string' || !gaId.length) {\n    return null;\n  }\n\n  return sha256(gaId);\n}\n""}","Horizon - TikTok - Ninja - Add to cart, Horizon - TikTok - Ninja - Product Detail, Horizon - TikTok - Shark - Purchase, Horizon - TikTok - Ninja - Start Checkout, Horizon - TikTok - Ninja - Purchase, GA4 - SS - Send Events",,,
148,cJS - Guest Checkout Email - Hashed,jsm,,"{""javascript"":""function() {\n  // SHA-256 function (corrected)\n  function sha256(ascii) {\n    function rightRotate(value, amount) {\n      return (value >>> amount) | (value << (32 - amount));\n    }\n\n    var mathPow = Math.pow;\n    var maxWord = mathPow(2, 32);\n    var lengthProperty = 'length';\n    var i, j;\n    var result = '';\n\n    var words = [];\n    var asciiBitLength = ascii[lengthProperty] * 8;\n\n    // Remove caching to prevent hash array from growing\n    var hash = [], k = [];\n\n    var primeCounter = 0;\n    var isComposite = {};\n    for (var candidate = 2; primeCounter < 64; candidate++) {\n      if (!isComposite[candidate]) {\n        for (i = candidate * candidate; i < 313; i += candidate) {\n          isComposite[i] = true;\n        }\n        hash[primeCounter] = (mathPow(candidate, 0.5) * maxWord) | 0;\n        k[primeCounter++] = (mathPow(candidate, 1 / 3) * maxWord) | 0;\n      }\n    }\n\n    ascii += '\\x80';\n    while (ascii[lengthProperty] % 64 - 56) ascii += '\\x00';\n    for (i = 0; i < ascii[lengthProperty]; i++) {\n      j = ascii.charCodeAt(i);\n      if (j >> 8) return; // Only accept ASCII\n      words[i >> 2] |= j << ((3 - i) % 4) * 8;\n    }\n    words[words[lengthProperty]] = (asciiBitLength / maxWord) | 0;\n    words[words[lengthProperty]] = asciiBitLength;\n\n    for (j = 0; j < words[lengthProperty];) {\n      var w = words.slice(j, j += 16);\n      var oldHash = hash.slice(0);\n\n      for (i = 16; i < 64; i++) {\n        var w15 = w[i - 15],\n          w2 = w[i - 2];\n\n        w[i] = (((w[i - 16] +\n          (rightRotate(w15, 7) ^ rightRotate(w15, 18) ^ (w15 >>> 3))) | 0) +\n          ((w[i - 7] +\n            (rightRotate(w2, 17) ^ rightRotate(w2, 19) ^ (w2 >>> 10))) | 0)) | 0;\n      }\n\n      var a = hash[0],\n        b = hash[1],\n        c = hash[2],\n        d = hash[3],\n        e = hash[4],\n        f = hash[5],\n        g = hash[6],\n        h = hash[7];\n\n      for (i = 0; i < 64; i++) {\n        var s0 = rightRotate(a, 2) ^ rightRotate(a, 13) ^ rightRotate(a, 22);\n        var maj = (a & b) ^ (a & c) ^ (b & c);\n        var t2 = s0 + maj;\n        var s1 = rightRotate(e, 6) ^ rightRotate(e, 11) ^ rightRotate(e, 25);\n        var ch = (e & f) ^ ((~e) & g);\n        var t1 = h + s1 + ch + k[i] + w[i];\n\n        h = g;\n        g = f;\n        f = e;\n        e = (d + t1) | 0;\n        d = c;\n        c = b;\n        b = a;\n        a = (t1 + t2) | 0;\n      }\n\n      hash[0] = (hash[0] + a) | 0;\n      hash[1] = (hash[1] + b) | 0;\n      hash[2] = (hash[2] + c) | 0;\n      hash[3] = (hash[3] + d) | 0;\n      hash[4] = (hash[4] + e) | 0;\n      hash[5] = (hash[5] + f) | 0;\n      hash[6] = (hash[6] + g) | 0;\n      hash[7] = (hash[7] + h) | 0;\n    }\n\n    for (i = 0; i < 8; i++) {\n      for (j = 3; j >= 0; j--) {\n        var b = (hash[i] >> (j * 8)) & 255;\n        result += ('0' + b.toString(16)).slice(-2);\n      }\n    }\n    return result;\n  }\n\n  // Function to check if a string is a 64-character hexadecimal (possible SHA-256 hash)\n  function isHex64(str) {\n    return /^[a-fA-F0-9]{64}$/.test(str);\n  }\n\n  // Extract email from the HTML\n  var emailElement = document.querySelector('.summary-details.confirmation-email');\n  if (!emailElement) {\n    return 'Email not found';\n  }\n\n  var email = emailElement.textContent.trim();\n\n  // Hash the email using the SHA-256 function\n  var hashedEmail = sha256(email);\n\n  return hashedEmail;\n}\n""}",cHTML - Impact - Identify,,,
158,cJS - purchase - country,jsm,,"{""javascript"":""function() {\n  /**\n    * note: this will only work on the order-confirm page\n    **/\n  var el = document.querySelector('.order-summary-country');\n  if (!el) return '';\n  return el.innerText.trim();\n}""}",Rokt - purchase,,,
159,dlv - riskified_status,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""riskified_status""}",GA4 - Event - riskified_advise_check,,,
170,Lookup - Impact Environment ID,remm,14933,"{""setDefaultValue"":""true"",""input"":""{{Page Hostname}}"",""fullMatch"":""true"",""replaceAfterMatch"":""true"",""defaultValue"":""14933"",""ignoreCase"":""true"",""map"":[{""key"":""sfccstage.sharkninja.com"",""value"":""60130""}]}",,,,Unused Variable
174,2x decode special characters Page URL - rev,jsm,,"{""javascript"":""function() {\nvar path = {{Page Path}};\nreturn path.replace(/[^a-zA-Z0-9]/g, '_');\n}""}",Horizon - LiveRamp,,,
176,cJS - Registered Product ID,jsm,,"{""javascript"":""function() {\n  // Get the parent div\n  var modal = document.getElementById('registerationSuccessModal');\n\n  // Get the div with the product ID\n  var div = modal.querySelector('.registered-product-id');\n  \n  if (div) {\n    return div.innerHTML;\n  }\n\n}\n""}",GA4 - Event - register_product,,,
177,cJS - Registered Product Name,jsm,,"{""javascript"":""function() {\n  // Get the parent div with class \""registered-product-details\""\n  var parentDiv = document.getElementById('registerationSuccessModal');\n\n  // Get the product title element\n  var titleElement = parentDiv.querySelector('.registered-product-name');\n\n  // Get the text content of the title element\n  var titleText = titleElement.textContent;\n\n  // Return the title text\n  return titleText;\n}\n""}",GA4 - Event - register_product,,,
187,GA4 - Ecommerce - item_list_id,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.items.0.item_list_id""}","DCM - Shark - Checkout (PMG), GA4 - Ecommerce - select_item, DCM - Shark - Purchase (PMG), GA4 - Ecommerce - view_item_list, ContentSquare - Dynamic Ecomm Variable",,GA4,
192,DLV - Email Subscription Form,v,,"{""dataLayerVersion"":""1"",""setDefaultValue"":""false"",""name"":""subscriptionForm""}",,"cEvent - formSubmit - Email Signup, cEvent - formSubmit - My Account - Preference Center",Google Analytics,
193,DLV - Popup Content,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""popup_content""}",GA4 - Event - popup,,,
198,cJS - Registration Model Number,jsm,,"{""javascript"":""function() {\n\nvar element = document.querySelector('[name = model]');\n\nif (element) {\n\n  return encodeURIComponent(element.value);\n\n  }\n\n}""}",,,Google Analytics,Unused Variable
200,cJS - Email Signup Overlay,jsm,,"{""javascript"":""function(){\n  \treturn document.getElementById('Overlay').style.display;\n}""}",,Window - Email Signup - Overlay,Google Analytics,
203,DLV - user_email_hash,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""user_email_hash""}","Horizon - Snapchat - Ninja - Purchase, Horizon - Pinterest - Shark - Base Tag - Check Order, Horizon - Pinterest - Shark - Base Tag, cHTML - Bazaar Voice - Shark - Transaction, Horizon - Pinterest - Ninja - Base Tag, cHTML - Bazaar Voice - Shark - Transaction (UAT), Horizon - Pinterest - Ninja - Base Tag - Check Order",,,
204,cJS - Product SKUs,jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var skus = [];\n  for(var i = 0; i < products.length; i++){\n    skus[i] = products[i].item_id;\n  }\n  return skus.join(',');\n}""}","Horizon - Snapchat - Ninja - Purchase, Horizon - Snapchat - Shark - Checkout, Horizon - Snapchat - Shark - Purchase, Horizon - Snapchat - Ninja - Checkout, GA4 - SS - Send Events",,Ecommerce,
207,GA4 - compare_sku,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""compare_sku""}",GA4 - Event - compare_model,,GA4,
220,cJS - Pinterest Hashed Cookie ID,jsm,,"{""javascript"":""function() {\n  function sha256(ascii) {\n    function rightRotate(value, amount) {\n      return (value>>>amount) | (value<<(32 - amount));\n    };\n\n    var mathPow = Math.pow;\n    var maxWord = mathPow(2, 32);\n    var lengthProperty = 'length'\n    var i, j; // Used as a counter across the whole file\n    var result = ''\n\n    var words = [];\n    var asciiBitLength = ascii[lengthProperty]*8;\n\n    //* caching results is optional - remove/add slash from front of this line to toggle\n    // Initial hash value: first 32 bits of the fractional parts of the square roots of the first 8 primes\n    // (we actually calculate the first 64, but extra values are just ignored)\n    var hash = sha256.h = sha256.h || [];\n    // Round constants: first 32 bits of the fractional parts of the cube roots of the first 64 primes\n    var k = sha256.k = sha256.k || [];\n    var primeCounter = k[lengthProperty];\n    /*/\n    var hash = [], k = [];\n    var primeCounter = 0;\n    //*/\n\n    var isComposite = {};\n    for (var candidate = 2; primeCounter < 64; candidate++) {\n      if (!isComposite[candidate]) {\n        for (i = 0; i < 313; i += candidate) {\n          isComposite[i] = candidate;\n        }\n        hash[primeCounter] = (mathPow(candidate, .5)*maxWord)|0;\n        k[primeCounter++] = (mathPow(candidate, 1/3)*maxWord)|0;\n      }\n    }\n\n    ascii += '\\x80' // Append ' bit (plus zero padding)\n    while (ascii[lengthProperty]%64 - 56) ascii += '\\x00' // More zero padding\n    for (i = 0; i < ascii[lengthProperty]; i++) {\n      j = ascii.charCodeAt(i);\n      if (j>>8) return; // ASCII check: only accept characters in range 0-255\n      words[i>>2] |= j << ((3 - i)%4)*8;\n    }\n    words[words[lengthProperty]] = ((asciiBitLength/maxWord)|0);\n    words[words[lengthProperty]] = (asciiBitLength)\n\n    // process each chunk\n    for (j = 0; j < words[lengthProperty];) {\n      var w = words.slice(j, j += 16); // The message is expanded into 64 words as part of the iteration\n      var oldHash = hash;\n      // This is now the undefinedworking hash\"", often labelled as variables a...g\n      // (we have to truncate as well, otherwise extra entries at the end accumulate\n      hash = hash.slice(0, 8);\n\n      for (i = 0; i < 64; i++) {\n        var i2 = i + j;\n        // Expand the message into 64 words\n        // Used below if \n        var w15 = w[i - 15], w2 = w[i - 2];\n\n        // Iterate\n        var a = hash[0], e = hash[4];\n        var temp1 = hash[7]\n          + (rightRotate(e, 6) ^ rightRotate(e, 11) ^ rightRotate(e, 25)) // S1\n          + ((e&hash[5])^((~e)&hash[6])) // ch\n          + k[i]\n          // Expand the message schedule if needed\n          + (w[i] = (i < 16) ? w[i] : (\n              w[i - 16]\n              + (rightRotate(w15, 7) ^ rightRotate(w15, 18) ^ (w15>>>3)) // s0\n              + w[i - 7]\n              + (rightRotate(w2, 17) ^ rightRotate(w2, 19) ^ (w2>>>10)) // s1\n            )|0\n          );\n        // This is only used once, so *could* be moved below, but it only saves 4 bytes and makes things unreadble\n        var temp2 = (rightRotate(a, 2) ^ rightRotate(a, 13) ^ rightRotate(a, 22)) // S0\n          + ((a&hash[1])^(a&hash[2])^(hash[1]&hash[2])); // maj\n\n        hash = [(temp1 + temp2)|0].concat(hash); // We don't bother trimming off the extra ones, they're harmless as long as we're truncating when we do the slice()\n        hash[4] = (hash[4] + temp1)|0;\n      }\n\n      for (i = 0; i < 8; i++) {\n        hash[i] = (hash[i] + oldHash[i])|0;\n      }\n    }\n\n    for (i = 0; i < 8; i++) {\n      for (j = 3; j + 1; j--) {\n        var b = (hash[i]>>(j*8))&255;\n        result += ((b < 16) ? 0 : '') + b.toString(16);\n      }\n    }\n    return result;\n  };\n\n  var gaId = {{GA4 - ga_id}};\n  return sha256(gaId);\n}\n""}","Horizon - Pinterest - Shark - Add To Cart, Horizon - Pinterest - Ninja - Pageview, Horizon - Pinterest - Ninja - Add To Cart, Horizon - Pinterest - Shark - Purchase, Horizon - Pinterest - Shark - Product Page, Horizon - Pinterest - Shark - Page Visit, Horizon - Pinterest - Ninja - Product Page, GA4 - SS - Send Events, Horizon - Pinterest - Ninja - Purchase",,,
221,DLV - popup_action,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""popup_action""}",GA4 - Event - popup,"cEvent - email_signup, cEvent - popup - generic",,
224,dlv - modelNumber,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""modelNumber""}",,,,Unused Variable
231,GA4 - last_purchased,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""last_purchased""}","GA4 - page_view, GA4 - Configuration - Support Sub-Domain, GA4 - Configuration, GA4 - Event - user_login, GA4 - SS - Send Events, GA4 - Ecommerce - purchase",,GA4,
232,cJS - First Items Array Item,jsm,,"{""javascript"":""function() {\n  var items = {{GA4 - Ecommerce - items}};\n  \n  // Check if items is an array and has at least one element\n  if (Array.isArray(items) && items.length > 0) {\n    // Return an array containing only the first item\n    return [items[0]];\n  } else {\n    // Return an empty array if items is not an array or is empty\n    return [];\n  }\n}""}",GA4 - Event - products_in_view,,,
235,DLV - NotifyMe - item_id,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""item_id_notify""}","Horizon - TikTok - Waitlist, Horizon - Snapchat - Shark - Waitlist",,,
236,cJS - NotifyMe - Parsed Product Data,jsm,,"{""javascript"":""function() {\n  // the product data could be in ecommerce.items if we're within a list OR ... it could be the actual product on a detail page\n  var sku = '{{DLV - NotifyMe - item_id}}';\n  if (!sku) {\n    return;\n  }\n  \n  \n  \n  function getDetailProductData() {\n    var dataLayer = window.dataLayer;\n    // find the first view_item event in the DL stack\n    var detailProduct = dataLayer.find(function(e) {\n      return e.event === 'view_item';\n    });\n    if (!detailProduct) {\n      return;\n    }\n    \n    // find the item in the ecommerce items list that matches\n    // this sku --- it may not find a match if the notify_me click \n    // happened on an addOn/Accessory list on the detail page\n    return detailProduct.ecommerce.items.find(function(i) {\n      i.item_id === sku;\n    });\n  }\n\n  // find the product from the current\n  // ecommerce items list\n  function getProductFromEComm() {\n    var allProducts = {{GA4 - Ecommerce - items}};\n    var foundProduct = allProducts.find(function(i) {\n      return i.item_id === sku;\n    });\n  \n    return foundProduct;\n  }\n  \n  // let's check detail page first\n  var notifiedProduct = getDetailProductData();\n  if (notifiedProduct) {\n    return notifiedProduct;\n  }\n\n  notifiedProduct = getProductFromEComm();\n  if (notifiedProduct) {\n    return notifiedProduct;\n  }\n\n  // console.error(\""could not locate product data for \"" + sku);\n  return;\n\n}""}",,,,Unused Variable
237,cJS - NotifyMe - Product Name,jsm,,"{""javascript"":""function () {\n  var data = {{cJS - NotifyMe - Parsed Product Data}};\n\n  if (!data || typeof data !== 'object') {\n    return '';\n  }\n\n  if (Object.keys(data).length === 0) {\n    return '';\n  }\n\n  if (!data.hasOwnProperty('item_name')) {\n    return '';\n  }\n\n  return data.item_name.trim();\n}""}","Horizon - DCM - Shark - Waitlist, GA4 - Event - notify_me",,,
239,CJS - Section Name,jsm,,"{""javascript"":""function() {\n\tvar el = {{Click Element}};\n\tvar section = el.getAttribute('data-lunametrics-list');\n\twhile(!el.matches('section')) {\n    \tel = el.parentElement;\n    }\n\treturn el.matches('section') ? (section || el.getAttribute('id')) : 'none';\n}""}",,,,Unused Variable
240,dlv - customer_type,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""customer_type""}","GA4 - page_view, GA4 - Configuration - Support Sub-Domain, ContentSquare Main Tag, Horizon Connect - Event - Purchase, GA4 - Configuration, GA4 - Event - user_login, GA4 - SS - Send Events, GA4 - Ecommerce - purchase",,GA4,
243,yieldify_element_id,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""yieldify_element_id""}",,,,Unused Variable
248,URL - Product Registration Model Number,u,,"{""component"":""QUERY"",""queryKey"":""modelNumber""}",,,,Unused Variable
249,DLV - first_name,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""first_name""}","cHTML - Bazaar Voice - Shark - Transaction, cHTML - Bazaar Voice - Shark - Transaction (UAT)",,,
250,cJS - DLV First Name - Hashed,jsm,,"{""javascript"":""function() {\n  // SHA-256 function (corrected)\n  function sha256(ascii) {\n    function rightRotate(value, amount) {\n      return (value >>> amount) | (value << (32 - amount));\n    }\n\n    var mathPow = Math.pow;\n    var maxWord = mathPow(2, 32);\n    var lengthProperty = 'length';\n    var i, j;\n    var result = '';\n\n    var words = [];\n    var asciiBitLength = ascii[lengthProperty] * 8;\n\n    // Remove caching to prevent hash array from growing\n    var hash = [], k = [];\n\n    var primeCounter = 0;\n    var isComposite = {};\n    for (var candidate = 2; primeCounter < 64; candidate++) {\n      if (!isComposite[candidate]) {\n        for (i = candidate * candidate; i < 313; i += candidate) {\n          isComposite[i] = true;\n        }\n        hash[primeCounter] = (mathPow(candidate, 0.5) * maxWord) | 0;\n        k[primeCounter++] = (mathPow(candidate, 1 / 3) * maxWord) | 0;\n      }\n    }\n\n    ascii += '\\x80';\n    while (ascii[lengthProperty] % 64 - 56) ascii += '\\x00';\n    for (i = 0; i < ascii[lengthProperty]; i++) {\n      j = ascii.charCodeAt(i);\n      if (j >> 8) return; // Only accept ASCII\n      words[i >> 2] |= j << ((3 - i) % 4) * 8;\n    }\n    words[words[lengthProperty]] = (asciiBitLength / maxWord) | 0;\n    words[words[lengthProperty]] = asciiBitLength;\n\n    for (j = 0; j < words[lengthProperty];) {\n      var w = words.slice(j, j += 16);\n      var oldHash = hash.slice(0);\n\n      for (i = 16; i < 64; i++) {\n        var w15 = w[i - 15],\n          w2 = w[i - 2];\n\n        w[i] = (((w[i - 16] +\n          (rightRotate(w15, 7) ^ rightRotate(w15, 18) ^ (w15 >>> 3))) | 0) +\n          ((w[i - 7] +\n            (rightRotate(w2, 17) ^ rightRotate(w2, 19) ^ (w2 >>> 10))) | 0)) | 0;\n      }\n\n      var a = hash[0],\n        b = hash[1],\n        c = hash[2],\n        d = hash[3],\n        e = hash[4],\n        f = hash[5],\n        g = hash[6],\n        h = hash[7];\n\n      for (i = 0; i < 64; i++) {\n        var s0 = rightRotate(a, 2) ^ rightRotate(a, 13) ^ rightRotate(a, 22);\n        var maj = (a & b) ^ (a & c) ^ (b & c);\n        var t2 = s0 + maj;\n        var s1 = rightRotate(e, 6) ^ rightRotate(e, 11) ^ rightRotate(e, 25);\n        var ch = (e & f) ^ ((~e) & g);\n        var t1 = h + s1 + ch + k[i] + w[i];\n\n        h = g;\n        g = f;\n        f = e;\n        e = (d + t1) | 0;\n        d = c;\n        c = b;\n        b = a;\n        a = (t1 + t2) | 0;\n      }\n\n      hash[0] = (hash[0] + a) | 0;\n      hash[1] = (hash[1] + b) | 0;\n      hash[2] = (hash[2] + c) | 0;\n      hash[3] = (hash[3] + d) | 0;\n      hash[4] = (hash[4] + e) | 0;\n      hash[5] = (hash[5] + f) | 0;\n      hash[6] = (hash[6] + g) | 0;\n      hash[7] = (hash[7] + h) | 0;\n    }\n\n    for (i = 0; i < 8; i++) {\n      for (j = 3; j >= 0; j--) {\n        var b = (hash[i] >> (j * 8)) & 255;\n        result += ('0' + b.toString(16)).slice(-2);\n      }\n    }\n    return result;\n  }\n\n  // Function to check if a string is a 64-character hexadecimal (possible SHA-256 hash)\n  function isHex64(str) {\n    return /^[a-fA-F0-9]{64}$/.test(str);\n  }\n\n  // Main code\n  var firstName = {{DLV - first_name}};\n  if (typeof firstName !== 'string' || !firstName.length) {\n    return null;\n  }\n\n  if (firstName !== null && isHex64(firstName)) {\n    // value is already hashed\n    return firstName;\n  }\n\n  return sha256(firstName);\n\n}\n""}",,,,Unused Variable
251,cJS - First Name - Hashed,jsm,,"{""javascript"":""function() {\n  // determine if this is a guest or signed-in user and return the appropriate variable\n  var dlvFirstName = {{DLV - first_name}};\n  if (dlvFirstName && dlvFirstName.length) {\n    return {{cJS - DLV First Name - Hashed}};\n  }\n  \n  return {{cJS - EC Guest First Name - Hashed}};\n}\n""}",GA4 - SS - Send Events,,,
252,DLV - webVitalsMeasurement.valueRounded,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""webVitalsMeasurement.valueRounded""}",,,,Unused Variable
253,SnapChat - _scid Cookie,k,,"{""decodeCookie"":""false"",""name"":""_scid""}",GA4 - SS - Send Events,,Snapchat,
255,DLV - webVitalsMeasurement.name,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""webVitalsMeasurement.name""}",,,,Unused Variable
260,cJS - view_item dataLayer - item_list_id,jsm,,"{""javascript"":""function() {\n  var item = {{cJS - view_item dataLayer - 1st item}};\n  if (!item) {\n    return;\n  }\n\n  return item.item_list_id;\n}\n""}",GA4 - Ecommerce - view_item,,,
262,DLV - last_name,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""last_name""}",,,,Unused Variable
265,Rokt - API key,c,us2-d49d43e6b45cdb42a0a6112b7f183f12,"{""value"":""us2-d49d43e6b45cdb42a0a6112b7f183f12""}",Rokt - initialization,,,
268,DLV - label,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""label""}",GA4 - Event - Quick Filter Click,,,
269,DLV - item view_type,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.items.0.view_type""}",GA4 - SS - Send Events,GA4 - PDP view_item,,
271,DLV - eCommerce Promotion,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.promoView""}",,,Ecommerce,Unused Variable
272,cJS - Promotion Click Object,jsm,,"{""javascript"":""function(){\n  return {'ecommerce': {'promoClick': {{DLV - eCommerce Promotion}} } };\n}""}",,,Google Analytics,Unused Variable
279,campaignID,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""campaignID""}",GA4 - Event - Dynamic Yield,,,
281,cJS - Input Value Text,jsm,,"{""javascript"":""function () {\n\tvar el = \""\"";\n  \n  \tel = {{Click Element}}.querySelector(\""input[type='submit']\"").getAttribute(\""value\"");\n\t\n\treturn el;\n}""}",,,Google Analytics,Unused Variable
284,cJS - Meta fbc,jsm,,"{""javascript"":""function() {\n  // Try to get fbclid from URL first\n  var urlParams = new URLSearchParams(window.location.search);\n  var fbclid = urlParams.get('fbclid');\n  \n  if (fbclid) {\n    return 'fb.1.' + Date.now() + '.' + fbclid;\n  }\n  \n  // Then try to get from cookie\n  var cookies = document.cookie.split(';');\n  for (var i = 0; i < cookies.length; i++) {\n    var cookie = cookies[i].trim().split('=');\n    if (cookie[0] === '_fbc') {\n      return cookie[1];\n    }\n  }\n  \n  return undefined;  // Return undefined if no FBC found\n}""}","Horizon - Facebook - Ninja - Pageview, Horizon - Facebook - Ninja - Pageview - Check Order",,,
297,DLV - eCommerce Object,v,,"{""dataLayerVersion"":""1"",""setDefaultValue"":""false"",""name"":""ecommerce""}",,,Ecommerce,Unused Variable
299,URL - Fragment,u,,"{""component"":""FRAGMENT""}",,,,Unused Variable
301,2x decode special characters Page URL,jsm,,"{""javascript"":""function() {\n  var url = {{Page URL}};\n\n  // Decode once\n  var decoded = decodeURIComponent(url);\n  // Decode twice if needed\n  if (decoded !== url) {\n    decoded = decodeURIComponent(decoded);\n  }\n\n  // Use anchor element to parse URL parts\n  var a = document.createElement('a');\n  a.href = decoded;\n  var pathname = a.pathname;\n  var search = a.search;\n\n  // Sanitize only user-entered search terms in the pathname\n  if (pathname.startsWith('/search/')) {\n    pathname = pathname.replace(/[^a-zA-Z0-9]/g, '_'); // Replace non-alphanumerics with _\n  }\n\n  // Optionally sanitize querystring values (not the structure)\nsearch = search.replace(/(%22|[\""]| |\\/|:|-|,|%|\\+|=|&|\\?)/g, '_');\n\n  return pathname + search;\n}""}",,,,Unused Variable
305,cJS - Email - Hashed,jsm,,"{""javascript"":""function() {\n  // determine if this is a guest or signed-in user and return the appropriate variable\n  var dlvEmail = {{DLV - user_email_hash}};\n  if (dlvEmail && dlvEmail.length) {\n    return {{DLV - user_email_hash}};\n  }\n  \n  return {{cJS - EC Guest Checkout - Email - Hashed}};\n}\n""}",GA4 - SS - Send Events,,,
309,dlv - OnetrustActiveGroups,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""OnetrustActiveGroups""}",,,GDPR Cookie Consent Notification,Unused Variable
310,Regex - social media cookies allowed,remm,FALSE,"{""setDefaultValue"":""true"",""input"":""{{dlv - OnetrustActiveGroups}}"",""fullMatch"":""false"",""replaceAfterMatch"":""false"",""defaultValue"":""false"",""ignoreCase"":""true"",""map"":[{""key"":"",C0005,"",""value"":""true""}]}",,,GDPR Cookie Consent Notification,Unused Variable
312,cJS - Facebook - Product SKUs - Lowercase,jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var skus = [];\n  for(var i = 0; i < products.length; i++){\n    skus[i] = products[i].item_id.toLowerCase();\n  }\n\treturn \""[\\\""\"" + skus.join('\"",\""') + \""\\\""]\"";\n}""}",,,,Unused Variable
314,cJS - NotifyMe - Product Category,jsm,,"{""javascript"":""function () {\n  var data = {{cJS - NotifyMe - Parsed Product Data}};\n\n  if (!data || typeof data !== 'object') {\n    return '';\n  }\n\n  if (Object.keys(data).length === 0) {\n    return '';\n  }\n\n  if (!data.hasOwnProperty('item_category')) {\n    return '';\n  }\n\n  return data.item_category.trim();\n}""}",Horizon - DCM - Shark - Waitlist,,,
318,cJS - Pinterest line items,jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var prodinfo = [];\n\n  for(var i = 0; i < products.length; i++){\n        if(products[i].category != 'main-product'){\n          prodinfo.push({\n          'product_id': products[i].item_id,\n          'product_name': products[i].item_name,\n          'product_quantity': products[i].quantity,\n          'product_price': products[i].price\n        });\n        };\n    }\n  return prodinfo;\n}""}","Horizon - Pinterest - Shark - Purchase, Horizon - Pinterest - Ninja - Purchase",,Ecommerce,
323,cJS - Zoovu line items,jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var line_items = [];\n  for(var i = 0; i < products.length; i++){\n    var items = {};\n    items.sku = products[i].item_id;\n    items.name = products[i].item_name;\n    items.quantity = parseInt(products[i].quantity,10);\n    items.pricePerUnit = parseFloat(products[i].price);\n    line_items.push(items);\n  }\n  return line_items;\n}""}",cHTML - Zoovu - Base code and conversion,,Zoovu,
328,GA4 - Ecommerce - items_discount,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.items.discount""}",,,,Unused Variable
329,cJS Convert undefined to empty string,jsm,,"{""javascript"":""function() {\n    var blank = \""\"";\n    return blank;\n  } \n""}",,,,Unused Variable
330,GA4 - Ecommerce - coupon,v,{{cJS Convert undefined to empty string}},"{""dataLayerVersion"":""2"",""setDefaultValue"":""true"",""defaultValue"":""{{cJS Convert undefined to empty string}}"",""name"":""ecommerce.coupon""}","cHTML - Impact - Purchase, cHTML - Extole - Conversion, cHTML - Zoovu - Base code and conversion, GA4 - SS - Send Events, GA4 - Ecommerce - purchase",,GA4,
332,cJS - Impact Radius - Product Object Price itemized,jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var prodinfo = [];\n  for(var i = 0; i < products.length; i++){\n        if(products[i].category != 'main-product'){\n          prodinfo.push({\n          'subTotal': products[i].price * products[i].quantity,\n          'quantity': products[i].quantity,\n          'name': products[i].item_name,\n          'sku': products[i].item_id,  \n          'category': products[i].item_category\n        });\n        }\n    }\n  return prodinfo;\n}""}",cHTML - Impact - Purchase,,Impact Radius,
340,DLV - video_action,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""video_action""}","GA4 - Event - video_progress, GA4 - Event - video_in_viewport",,,
341,DLV - video_title,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""video_title""}",,,,Unused Variable
342,cJS - Video Title,jsm,,"{""javascript"":""function() {\n  // try to pull from gtm variable\n  var videoTitle = {{Video Title}};\n  if (videoTitle) {\n    return videoTitle;\n  }\n\n  // check the DLV if it's already set\n  videoTitle = {{DLV - video_title}};\n  if (videoTitle && videoTitle !== '[undetermined]') {\n    return videoTitle;\n  }\n\n  // try to parse from the URL\n  var videoUrl = {{DLV - video_url}};\n\n    // return a \""readable\"" filename for the URL\n    function parseVideoTitleFromURL(url) {\n      if (!url) {\n        return \""[undetermined]\"";\n      }\n      \n      if (!URL.canParse(url)) {\n        return \""[undetermined]\"";\n      }\n      \n      // create our URL object\n      var u = new URL(url);\n      // get the pathname and break it up by directories\n      var segments = u.pathname.split(\""/\"");\n      \n      if (!segments || segments.length === 0) {\n        return \""[undetermined]\"";\n      }\n      \n      // get the last item\n      var filename = segments[segments.length - 1];\n      \n      if (filename.length === 0) {\n        return \""[undetermined]\"";\n      }\n      \n      return filename.replace(/_|\\-/g, \"" \"");\n    }\n\n  return parseVideoTitleFromURL(videoUrl);\n}""}","GA4 - Event - video_progress, GA4 - Event - video_in_viewport",,,
343,DLV - video_percent,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""video_percent""}","GA4 - Event - video_progress, GA4 - Event - video",,,
361,Server Side Endpoint,c,https://data.sharkninja.com,"{""value"":""https://data.sharkninja.com""}",GA4 - SS Configuration,,,
367,dlv - review_rating,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""review_rating""}",,,,Unused Variable
370,"cJS - Product Info - Price, Quantity, & Main SKU",jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var prodinfo = [];\n\n  for(var i = 0; i < products.length; i++){\n        if(products[i].category != 'main-product'){\n          prodinfo.push({\n          'price': products[i].price,\n          'quantity': products[i].quantity,\n          'sku': products[i].item_id,\n           'name': products[i].item_name,\n           'category': products[i].item_category\n        });\n        };\n    }\n  return prodinfo;\n}""}","cHTML - Bazaar Voice - Shark - Transaction, cHTML - Bazaar Voice - Shark - Transaction (UAT)",,BazaarVoice,
376,dlv - page_change,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""page_change""}",,,,Unused Variable
380,cJS - Item Brands,jsm,,"{""javascript"":""function() {\n  var hasNinjaProducts = {{cJS - eCommerce - hasNinjaProducts}};\n  var hasSharkProducts = {{cJS - eCommerce - hasSharkProducts}};\n\n  if (hasNinjaProducts && hasSharkProducts) {\n    return 'SharkNinja';\n  } else if (hasSharkProducts) {\n    return 'Shark';\n  } else if (hasNinjaProducts) {\n    return 'Ninja';\n  }\n\n  return '';\n}""}",GA4 - SS - Send Events,"Checkout - Ninja Brand, Checkout - Shark Brand",,
387,cJS - content_category,jsm,,"{""javascript"":""function() {\n  var items = {{GA4 - Ecommerce - items}};\n\n  if (!items || !Array.isArray(items)) {\n    return [];\n  }\n\n  var categories = items.map(function(item) {\n    return item ? item.content_category : undefined;\n  });\n\n  var cleanedCategories = categories.filter(function(category) {\n    return category !== undefined && category !== null;\n  });\n\n  return cleanedCategories;\n}""}","Horizon - Facebook - Ninja - Pageview - Check Order, Facebook - Shark - Page View, GA4 - SS - Send Events",,,
398,cJS - Main SKU - Lowercase,jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var skus = [];\n  for(var i = 0; i < products.length; i++){\n    if(products[i].category === 'main-product'){\n    \tskus[i] = products[i].item_id.toLowerCase();\n    }\n  }\n\treturn skus.join(',');\n}""}",,,Ecommerce,Unused Variable
399,cJS - Dynamic eCommerce - price,jsm,,"{""javascript"":""function () {\n  var items = {{cJS - Dynamic eCommerce Items}};\n  if (Array.isArray(items) && items.length > 0) {\n    return items[0].price;\n  }\n  \n  return undefined;\n}""}",Amazon - Page View,,,
402,DLV - filterName,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""filterName""}","GA4 - Event - Quick Filter Click, GA4 - Event - filter_click",,,
408,cJS - purchase - phone,jsm,,"{""javascript"":""function() {\n  /**\n    * note: this will only work on the order-confirm page\n    **/\n  var el = document.querySelector('.order-summary-country');\n  if (!el) return '';\n  return el.innerText.trim();\n}""}",Rokt - purchase,,,
410,dlv - BV bvsc_event_data,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""bvsc_event_data""}",,,,Unused Variable
416,cJS - Email Signup Footer,jsm,,"{""javascript"":""function(){\n  \treturn document.getElementById('mlFormFooter').style.display;\n}""}",,,Google Analytics,Unused Variable
421,cJS - NotifyMe - Product Currency,jsm,,"{""javascript"":""function () {\n  var data = {{cJS - NotifyMe - Parsed Product Data}};\n\n  if (!data || typeof data !== 'object') {\n    return '';\n  }\n\n  if (Object.keys(data).length === 0) {\n    return '';\n  }\n\n  if (!data.hasOwnProperty('currency')) {\n    return '';\n  }\n\n  return data.currency.trim();\n}""}",Horizon - TikTok - Waitlist,,,
422,cJS - NotifyMe - Product Price,jsm,,"{""javascript"":""function () {\n  var data = {{cJS - NotifyMe - Parsed Product Data}};\n\n  if (!data || typeof data !== 'object') {\n    return '';\n  }\n\n  if (Object.keys(data).length === 0) {\n    return '';\n  }\n\n  if (!data.hasOwnProperty('price')) {\n    return '';\n  }\n\n  return data.price;\n}""}","Horizon - TikTok - Waitlist, Horizon - DCM - Shark - Waitlist, Horizon - Snapchat - Shark - Waitlist",,,
424,cJS - view_item dataLayer - price,jsm,,"{""javascript"":""function() {\n  var item = {{cJS - view_item dataLayer - 1st item}};\n  if (!item) {\n    return;\n  }\n\n  return item.price;\n}\n""}","Horizon - Pinterest - Shark - Product Page, Horizon - DCM - Shark - Product Pages - Standard, Horizon - Pinterest - Ninja - Product Page, Horizon - DCM - Ninja - View Product Page",,,
428,cJS - purchase - billing info postal code,jsm,,"{""javascript"":""function () {\n    /**\n    * note: this will only work on the order-confirm page\n    **/\n  var details = document.querySelector('.summary-details.billing .address-summary .postalCode');\n  if (!details) return '';\n  \n  return details.innerText.trim();\n}""}",Rokt - purchase,,,
430,Cookie - Email Logged In,k,,"{""decodeCookie"":""true"",""name"":""email""}",,,,Unused Variable
438,yieldify_campaign_name,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""yieldify_campaign_name""}",,,,Unused Variable
441,experienceID,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""experienceID""}",GA4 - Event - Dynamic Yield,,,
442,variationID,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""variationID""}",GA4 - Event - Dynamic Yield,,,
443,variationName,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""variationName""}",GA4 - Event - Dynamic Yield,,,
444,campaignName,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""campaignName""}",GA4 - Event - Dynamic Yield,,,
448,cJS - Country Selector,jsm,,"{""javascript"":""function() {\n  // Check for dropdown open\n  if ({{Click Classes}}.indexOf('country-selector-button') > -1) {\n    return 'dropdown_open';\n  }\n  \n  // the country select is just an <A> with no classes\n  // so we have to sniff out it's selector heirarchy\n  var ce = {{Click Element}};\n\n  // make sure we have the right object\n  if (ce instanceof HTMLElement) {\n    // make sure it's an anchor\n    if (ce.tagName === 'A') {\n      var parent = ce.closest('div.continent');\n      if (parent) {\n        return 'country_selected';\n      }\n    }\n  }\n  \n  return '';\n}""}",GA4 - Event - country_selector_interaction,,,
450,Cookie - gaCheck,k,,"{""decodeCookie"":""true"",""name"":""gaCheck""}",,,,Unused Variable
454,cJS - view_item dataLayer - ninjaProducts,jsm,,"{""javascript"":""function() {\n  var allProducts = {{cJS - view_item dataLayer - items}};\n  var filteredProducts = [];\n\n  for(var i = 0; i < allProducts.length; i++){\n    if (allProducts[i].item_brand === 'Ninja') {\n      filteredProducts.push(allProducts[i]);\n    }\n  }\n\n  return filteredProducts;\n}""}",,,,Unused Variable
455,cJS - view_item dataLayer - hasNinjaProducts,jsm,,"{""javascript"":""function() {\n  var products = {{cJS - view_item dataLayer - ninjaProducts}};\n\n  if (!products || !Array.isArray(products)) {\n      return false;\n  }\n      \n  return products.length > 0;\n}""}",,Ninja Products - cEvent - Group - page_load + view_item,,
463,cJS - Tv Scientific - Grill Notes,jsm,,"{""javascript"":""function checkForGrill() {\n    var items = {{GA4 - Ecommerce - items}} || [];\n    var foundGrill = false;\n\n    for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n        if (typeof item === 'object') {\n            for (var key in item) {\n                if (typeof item[key] === 'string' && item[key].toLowerCase().includes('grill')) {\n                    foundGrill = true;\n                    break;\n                }\n            }\n        }\n        if (foundGrill) {\n            break;\n        }\n    }\n\n    return foundGrill ? 'Grill' : 'No Grill';\n}\n\n""}",cHTML - tvScientific - purchase,,,
464,cJS - Cart Subtotal,jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var subtotal = 0;\n  for(var i = 0; i < products.length; i++){\n    subtotal += products[i].price * products[i].quantity;\n  }\n  return subtotal;\n}""}",cHTML - tvScientific - purchase,,Ecommerce,
468,DLV - Cookie Name,v,,"{""setDefaultValue"":""false"",""dataLayerVersion"":""2"",""name"":""attributes.cookieName""}",,,LunaMetrics Cookie Management Plugin,Unused Variable
477,DLV - search_term,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""search_term""}",GA4 - Event - view_search_results,,,
478,"cJS - Product Info - Price, Quantity, & ID",jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var prodinfo = [];\n\n  for(var i = 0; i < products.length; i++){\n        if(products[i].category == 'main-product'){\n          prodinfo.push({\n          'price': products[i].price,\n          'quantity': products[i].quantity,\n          'id': products[i].item_id          \n        });\n        };\n    }\n  return prodinfo;\n}""}","cHTML - Criteo View Cart, cHTML - Criteo Conversion Tag",,BazaarVoice,
484,Amazon Tag ID,c,c3ffc48a-0d92-415d-ae8e-30b2d1ee5d91,"{""value"":""c3ffc48a-0d92-415d-ae8e-30b2d1ee5d91""}","Amazon - Signup, Amazon - Page View, Amazon - Site Search, Amazon - Off-Amazon-Purchase, Amazon - Begin Checkout",,,
486,event,e,,{},,,,Unused Variable
488,dlv - BV bvsc_event_data_2,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""bvsc_event_data_2""}",,,,Unused Variable
491,GA4 - Ecommerce - shipping,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.shipping""}","GA4 - SS - Send Events, GA4 - Ecommerce - purchase",,GA4,
492,dlv - review_id,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""review_id""}",,,,Unused Variable
497,Amazon - Pageview Event Name,remm,,"{""setDefaultValue"":""false"",""input"":""{{Page Path}}"",""fullMatch"":""true"",""replaceAfterMatch"":""true"",""ignoreCase"":""true"",""map"":[{""key"":""/$"",""value"":""Homepage""},{""key"":""/deals"",""value"":""Sales&Offers""},{""key"":""product_categories.new"",""value"":""NewArrivals""},{""key"":""/order-status"",""value"":""OrderStatus""},{""key"":""product_categories.new"",""value"":""Category""}]}",Amazon - Page View,,,
498,cJS - Popup Content,jsm,,"{""javascript"":""function() {\n  // Function to get text from LTK popup\n  function getLtkPopupText() {\n    var ltkPopupContents = document.getElementById('ltkpopup-contents');\n    if (ltkPopupContents) {\n      return Array.from(ltkPopupContents.getElementsByTagName('span'))\n        .map(function(span) { return span.textContent.replace(/\\s+/g, ' ').trim(); })\n        .join(' ');\n    }\n    return null;\n  }\n\n  // Function to get text from Extole header\n  function getExtoleHeaderText() {\n    var extoleHeader = document.querySelector('header.extole-header[role=\""banner\""]');\n    if (extoleHeader) {\n      var h1 = extoleHeader.querySelector('h1');\n      var h2 = extoleHeader.querySelector('h2');\n      return [h1, h2]\n        .filter(function(el) { return el !== null; })\n        .map(function(el) { return el.textContent.trim(); })\n        .join(' ');\n    }\n    return null;\n  }\n\n  // Check if URL contains '/black-friday'\n  if (window.location.href.includes('/black-friday')) {\n    return \""Shark Black Friday Deals 2024\"";\n  }\n\n  // Try to get text from LTK popup first, then fall back to Extole header\n  var popupText = getLtkPopupText() || getExtoleHeaderText() || '';\n  \n  // Return the non-empty result or an empty string\n  return popupText.trim();\n}\n""}",,,,Unused Variable
500,cJS - Product Tile Name,jsm,,"{""javascript"":""function() {\n  var clickedElement = {{Click Element}};\n  var productTile = clickedElement.closest('.product-tile');\n  if (!productTile) {\n    return undefined;\n  }\n\n  var nameEl = productTile.querySelector('.tile-body .link');\n  return nameEl ? nameEl.textContent.trim() : undefined;\n}\n""}",,,,Unused Variable
502,cJS - view_item dataLayer - item_list_name,jsm,,"{""javascript"":""function() {\n  var item = {{cJS - view_item dataLayer - 1st item}};\n  if (!item) {\n    return;\n  }\n\n  return item.item_list_name;\n}\n""}","GA4 - Ecommerce - view_item, Horizon - DCM - Shark - Product Pages - Standard, Horizon - DCM - Ninja - View Product Page",,,
507,cJS - Dynamic eCommerce - quantity,jsm,,"{""javascript"":""function () {\n  var items = {{cJS - Dynamic eCommerce Items}};\n  if (Array.isArray(items) && items.length > 0) {\n    return items[0].quantity;\n  }\n  \n  return undefined;\n}""}",Amazon - Page View,,,
508,GA4 - Ecommerce - affiliation,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.affiliation""}","GA4 - SS - Send Events, GA4 - Ecommerce - purchase",,GA4,
509,cJS - User Email,jsm,,"{""javascript"":""function getEmailHash() {\n  var dlvEmailHash = {{DLV - user_email_hash}};\n  var cJSEmailHash = {{cJS - EC Guest Checkout - Email - Hashed}};\n\n  if (dlvEmailHash && dlvEmailHash !== \""\"" && dlvEmailHash !== \""undefined\"" && dlvEmailHash !== null) {\n    return dlvEmailHash;\n  } else if (cJSEmailHash && cJSEmailHash !== \""\"" && cJSEmailHash !== \""undefined\"" && cJSEmailHash !== null) {\n    return cJSEmailHash;\n  } else {\n    return undefined; // Or return an empty string, depending on desired behavior for no hash found\n  }\n}""}",,,,Unused Variable
513,GA4 - compare_action,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""compare_action""}",GA4 - Event - compare_model,,GA4,
514,cJS - EC Guest Checkout - Phone Number Hashed,jsm,,"{""javascript"":""function() {\n  // SHA-256 function (unchanged from your original)\n  function sha256(ascii) {\n    function rightRotate(value, amount) {\n      return (value >>> amount) | (value << (32 - amount));\n    }\n\n    var mathPow = Math.pow;\n    var maxWord = mathPow(2, 32);\n    var lengthProperty = 'length';\n    var i, j;\n    var result = '';\n\n    var words = [];\n    var asciiBitLength = ascii[lengthProperty] * 8;\n\n    var hash = [], k = [];\n\n    var primeCounter = 0;\n    var isComposite = {};\n    for (var candidate = 2; primeCounter < 64; candidate++) {\n      if (!isComposite[candidate]) {\n        for (i = candidate * candidate; i < 313; i += candidate) {\n          isComposite[i] = true;\n        }\n        hash[primeCounter] = (mathPow(candidate, 0.5) * maxWord) | 0;\n        k[primeCounter++] = (mathPow(candidate, 1 / 3) * maxWord) | 0;\n      }\n    }\n\n    ascii += '\\x80';\n    while (ascii[lengthProperty] % 64 - 56) ascii += '\\x00';\n    for (i = 0; i < ascii[lengthProperty]; i++) {\n      j = ascii.charCodeAt(i);\n      if (j >> 8) return;\n      words[i >> 2] |= j << ((3 - i) % 4) * 8;\n    }\n    words[words[lengthProperty]] = (asciiBitLength / maxWord) | 0;\n    words[words[lengthProperty]] = asciiBitLength;\n\n    for (j = 0; j < words[lengthProperty];) {\n      var w = words.slice(j, j += 16);\n      var oldHash = hash.slice(0);\n\n      for (i = 16; i < 64; i++) {\n        var w15 = w[i - 15],\n            w2 = w[i - 2];\n\n        w[i] = (((w[i - 16] +\n          (rightRotate(w15, 7) ^ rightRotate(w15, 18) ^ (w15 >>> 3))) | 0) +\n          ((w[i - 7] +\n            (rightRotate(w2, 17) ^ rightRotate(w2, 19) ^ (w2 >>> 10))) | 0)) | 0;\n      }\n\n      var a = hash[0], b = hash[1], c = hash[2], d = hash[3];\n      var e = hash[4], f = hash[5], g = hash[6], h = hash[7];\n\n      for (i = 0; i < 64; i++) {\n        var s0 = rightRotate(a, 2) ^ rightRotate(a, 13) ^ rightRotate(a, 22);\n        var maj = (a & b) ^ (a & c) ^ (b & c);\n        var t2 = s0 + maj;\n        var s1 = rightRotate(e, 6) ^ rightRotate(e, 11) ^ rightRotate(e, 25);\n        var ch = (e & f) ^ ((~e) & g);\n        var t1 = h + s1 + ch + k[i] + w[i];\n\n        h = g; g = f; f = e;\n        e = (d + t1) | 0;\n        d = c; c = b; b = a;\n        a = (t1 + t2) | 0;\n      }\n\n      hash[0] = (hash[0] + a) | 0;\n      hash[1] = (hash[1] + b) | 0;\n      hash[2] = (hash[2] + c) | 0;\n      hash[3] = (hash[3] + d) | 0;\n      hash[4] = (hash[4] + e) | 0;\n      hash[5] = (hash[5] + f) | 0;\n      hash[6] = (hash[6] + g) | 0;\n      hash[7] = (hash[7] + h) | 0;\n    }\n\n    for (i = 0; i < 8; i++) {\n      for (j = 3; j >= 0; j--) {\n        var b = (hash[i] >> (j * 8)) & 255;\n        result += ('0' + b.toString(16)).slice(-2);\n      }\n    }\n    return result;\n  }\n\n  // Get the GA4 ID from the GTM variable\n  var gaId = {{cJS - EC Guest Checkout - Phone Number}};\n\n  if (typeof gaId !== 'string' || !gaId.length) {\n    return null;\n  }\n\n  return sha256(gaId);\n}\n""}",GA4 - SS - Send Events,,,
519,dlv - review_feedback,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""review_feedback""}",,,,Unused Variable
520,Cookie - Previous Order ID,k,,"{""decodeCookie"":""false"",""name"":""ga_transactionID_shark""}",,,Ecommerce,Unused Variable
521,cJS - Dynamic eCommerce - item_category,jsm,,"{""javascript"":""function () {\n  var items = {{cJS - Dynamic eCommerce Items}};\n  if (Array.isArray(items) && items.length > 0) {\n    return items[0].item_category;\n  }\n  \n  return undefined;\n}""}","Amazon - Page View, ContentSquare Main Tag",,,
523,cJS - DLV Last Name - Hashed,jsm,,"{""javascript"":""function() {\n  // SHA-256 function (corrected)\n  function sha256(ascii) {\n    function rightRotate(value, amount) {\n      return (value >>> amount) | (value << (32 - amount));\n    }\n\n    var mathPow = Math.pow;\n    var maxWord = mathPow(2, 32);\n    var lengthProperty = 'length';\n    var i, j;\n    var result = '';\n\n    var words = [];\n    var asciiBitLength = ascii[lengthProperty] * 8;\n\n    // Remove caching to prevent hash array from growing\n    var hash = [], k = [];\n\n    var primeCounter = 0;\n    var isComposite = {};\n    for (var candidate = 2; primeCounter < 64; candidate++) {\n      if (!isComposite[candidate]) {\n        for (i = candidate * candidate; i < 313; i += candidate) {\n          isComposite[i] = true;\n        }\n        hash[primeCounter] = (mathPow(candidate, 0.5) * maxWord) | 0;\n        k[primeCounter++] = (mathPow(candidate, 1 / 3) * maxWord) | 0;\n      }\n    }\n\n    ascii += '\\x80';\n    while (ascii[lengthProperty] % 64 - 56) ascii += '\\x00';\n    for (i = 0; i < ascii[lengthProperty]; i++) {\n      j = ascii.charCodeAt(i);\n      if (j >> 8) return; // Only accept ASCII\n      words[i >> 2] |= j << ((3 - i) % 4) * 8;\n    }\n    words[words[lengthProperty]] = (asciiBitLength / maxWord) | 0;\n    words[words[lengthProperty]] = asciiBitLength;\n\n    for (j = 0; j < words[lengthProperty];) {\n      var w = words.slice(j, j += 16);\n      var oldHash = hash.slice(0);\n\n      for (i = 16; i < 64; i++) {\n        var w15 = w[i - 15],\n          w2 = w[i - 2];\n\n        w[i] = (((w[i - 16] +\n          (rightRotate(w15, 7) ^ rightRotate(w15, 18) ^ (w15 >>> 3))) | 0) +\n          ((w[i - 7] +\n            (rightRotate(w2, 17) ^ rightRotate(w2, 19) ^ (w2 >>> 10))) | 0)) | 0;\n      }\n\n      var a = hash[0],\n        b = hash[1],\n        c = hash[2],\n        d = hash[3],\n        e = hash[4],\n        f = hash[5],\n        g = hash[6],\n        h = hash[7];\n\n      for (i = 0; i < 64; i++) {\n        var s0 = rightRotate(a, 2) ^ rightRotate(a, 13) ^ rightRotate(a, 22);\n        var maj = (a & b) ^ (a & c) ^ (b & c);\n        var t2 = s0 + maj;\n        var s1 = rightRotate(e, 6) ^ rightRotate(e, 11) ^ rightRotate(e, 25);\n        var ch = (e & f) ^ ((~e) & g);\n        var t1 = h + s1 + ch + k[i] + w[i];\n\n        h = g;\n        g = f;\n        f = e;\n        e = (d + t1) | 0;\n        d = c;\n        c = b;\n        b = a;\n        a = (t1 + t2) | 0;\n      }\n\n      hash[0] = (hash[0] + a) | 0;\n      hash[1] = (hash[1] + b) | 0;\n      hash[2] = (hash[2] + c) | 0;\n      hash[3] = (hash[3] + d) | 0;\n      hash[4] = (hash[4] + e) | 0;\n      hash[5] = (hash[5] + f) | 0;\n      hash[6] = (hash[6] + g) | 0;\n      hash[7] = (hash[7] + h) | 0;\n    }\n\n    for (i = 0; i < 8; i++) {\n      for (j = 3; j >= 0; j--) {\n        var b = (hash[i] >> (j * 8)) & 255;\n        result += ('0' + b.toString(16)).slice(-2);\n      }\n    }\n    return result;\n  }\n\n  // Function to check if a string is a 64-character hexadecimal (possible SHA-256 hash)\n  function isHex64(str) {\n    return /^[a-fA-F0-9]{64}$/.test(str);\n  }\n\n  // Main code\n  var lastName = {{DLV - last_name}};\n  if (typeof lastName !== 'string' || !lastName.length) {\n    return null;\n  }\n\n  if (lastName !== null && isHex64(lastName)) {\n    // value is already hashed\n    return lastName;\n  }\n\n  return sha256(lastName);\n\n}\n""}",,,,Unused Variable
524,Regex - functional cookies allowed,remm,FALSE,"{""setDefaultValue"":""true"",""input"":""{{dlv - OnetrustActiveGroups}}"",""fullMatch"":""false"",""replaceAfterMatch"":""false"",""defaultValue"":""false"",""ignoreCase"":""true"",""map"":[{""key"":"",C0003,"",""value"":""true""}]}",,,GDPR Cookie Consent Notification,Unused Variable
526,DLV - Email Preferences,v,,"{""dataLayerVersion"":""1"",""setDefaultValue"":""false"",""name"":""emailPreferences""}",,,Google Analytics,Unused Variable
527,cJS - Preference Center Options,jsm,,"{""javascript"":""function () {\n\tvar opt = {{DLV - Email Preferences}} || '';\n\tif ({{DLV - Email Subscription Form}} === 'pref-center_success') {\n    \topt = (opt != '') ? opt : 'Unsubscription_promotions';\n    }\n\telse {\n    \topt = 'Unsubscription_all';\n    }\n\treturn opt;\n} \n""}",,,Google Analytics,Unused Variable
528,Regex - targeting cookies allowed,remm,FALSE,"{""setDefaultValue"":""true"",""input"":""{{dlv - OnetrustActiveGroups}}"",""fullMatch"":""false"",""replaceAfterMatch"":""false"",""defaultValue"":""false"",""ignoreCase"":""true"",""map"":[{""key"":"",C0004,"",""value"":""true""}]}",,,GDPR Cookie Consent Notification,Unused Variable
541,cJS - NotifyMe - Product SKU,jsm,,"{""javascript"":""function () {\n  var data = {{cJS - NotifyMe - Parsed Product Data}};\n\n  if (!data || typeof data !== 'object') {\n    return '';\n  }\n\n  if (Object.keys(data).length === 0) {\n    return '';\n  }\n\n  if (!data.hasOwnProperty('item_id')) {\n    return '';\n  }\n\n  return data.item_id.trim();\n}""}","Horizon - DCM - Shark - Waitlist, GA4 - Event - notify_me",,,
545,cJS - Click URL - File Extension,jsm,,"{""javascript"":""function() {\nvar e={{Click Element}}.pathname.split('.');return e.length>1?e.pop():'html';\n}""}",,,,Unused Variable
553,cJS - Number of Products,jsm,,"{""javascript"":""function(){\n  return {{GA4 - Ecommerce - items}}.length;\n}""}",,,Ecommerce,Unused Variable
562,dlv - email,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""email""}",,,,Unused Variable
567,cJS - Main SKU,jsm,,"{""javascript"":""function(){\n  var products = {{cJS - Product SKUs}}, mainsku;\n\n  if (products.split(',').length > 1) {\n  \tmainsku = products.split(',', 1);\n  }\n  else {\n  \tmainsku = products;\n  }\n  return mainsku;\n}""}",cHTML - Criteo Sitewide Tag,,Ecommerce,
570,cJS - view_item dataLayer - item_id,jsm,,"{""javascript"":""function() {\n  var item = {{cJS - view_item dataLayer - 1st item}};\n  if (!item) {\n    return;\n  }\n\n  return item.item_id;\n}\n""}","Horizon - DCM - Shark - Product Pages - Standard, DCM - Shark - View Product Page (PMG), Horizon - Pinterest - Ninja - Product Page, Horizon - DCM - Ninja - View Product Page",,,
578,GA4 - Ecommerce - payment_type,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.payment_type""}",GA4 - Ecommerce - add_payment_info,,GA4,
579,GA4 - Ecommerce - coupon (basket),v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.coupon""}","GA4 - Ecommerce - add_payment_info, GA4 - Ecommerce - begin_checkout",,GA4,
582,DLV - GA Click Name,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""gtm.element.name""}",,,Google Analytics,Unused Variable
590,DLV - webVitalsMeasurement.deltaRounded,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""webVitalsMeasurement.deltaRounded""}",,,,Unused Variable
597,Amazon Fire Rotator ID,c,2072de34-f798-4813-95a6-b53647b45f0f,"{""value"":""2072de34-f798-4813-95a6-b53647b45f0f""}","Amazon - Fire Rotator - View Item, Amazon - Fire Rotator - Page View",,,
599,cJS - Product SKUs (Hyphen Delimited),jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var skus = [];\n  for(var i = 0; i < products.length; i++){\n    skus[i] = products[i].item_id;\n  }\n  return skus.join('-');\n}""}",,,Ecommerce,Unused Variable
604,URL - Click Path,u,,"{""component"":""PATH"",""customUrlSource"":""{{Click URL}}""}",,,,Unused Variable
605,GA4 - Ecommerce - item_brand,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.items.0.item_brand""}",ContentSquare - Dynamic Ecomm Variable,,,
608,DLV - page_url,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""page_url""}",,,,Unused Variable
615,DLV - search_results_count,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""search_results_count""}",GA4 - Event - view_search_results,,,
617,dlv - filter_category,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""filter_category""}",,,,Unused Variable
618,cJS - Product SKUs double quotes comma delimited,jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var skus = [];\n  for(var i = 0; i < products.length; i++){\n    skus[i] = products[i].item_id;\n  }\n  return '\""' + skus.join('\"",\""') + '\""';\n}""}",,,Ecommerce,Unused Variable
619,dlv - coupon_apply_status,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""coupon_apply_status""}",GA4 - Promo Code Apply,,,
622,DLV - Cookie Path,v,,"{""setDefaultValue"":""false"",""dataLayerVersion"":""2"",""name"":""attributes.cookiePath""}",,,LunaMetrics Cookie Management Plugin,Unused Variable
625,DLV - user_email,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""user_email""}",,,,Unused Variable
632,DLV - webVitalsMeasurement.id,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""webVitalsMeasurement.id""}",,,,Unused Variable
634,DLV - Video State,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""videoState""}",,,,Unused Variable
636,cJS - purchase - email,jsm,,"{""javascript"":""function() {\n  /**\n    * note: this will only work on the order-confirm page\n    **/\n  var el = document.querySelector('.order-summary-email');\n  if (!el) return '';\n  return el.innerText.trim();\n}""}",Rokt - purchase,,,
637,cJS - eCommerce Object,jsm,,"{""javascript"":""function(){\n  return {'ecommerce': {{DLV - eCommerce Object}} };\n}""}",,,Google Analytics,Unused Variable
638,DLV - NotifyMe - item_name,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""item_name_notify""}",,,,Unused Variable
640,Oldurl,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""gtm.oldUrl""}",,,,Unused Variable
641,DLV - Cookie Value,v,,"{""setDefaultValue"":""false"",""dataLayerVersion"":""2"",""name"":""attributes.cookieValue""}",,,LunaMetrics Cookie Management Plugin,Unused Variable
648,DLV - Cookie Expiration,v,,"{""setDefaultValue"":""false"",""dataLayerVersion"":""2"",""name"":""attributes.cookieExpires""}",,,LunaMetrics Cookie Management Plugin,Unused Variable
652,cJS - Ecommerce - item_name,jsm,,"{""javascript"":""function() {\n  var nameSpan = document.querySelector('span[itemprop=\""name\""]');\n  if (nameSpan) {\n    return nameSpan.innerText;\n  } else {\n    return undefined;\n  }\n}\n""}",,,,Unused Variable
653,DLV - Virtual Page Title,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""VirtualPageTitle""}",,,,Unused Variable
658,cJS - Item Brands (copy),jsm,,"{""javascript"":""function() {\n  var hasNinjaProducts = {{cJS - eCommerce - hasNinjaProducts}};\n  var hasSharkProducts = {{cJS - eCommerce - hasSharkProducts}};\n\n  if (hasNinjaProducts && hasSharkProducts) {\n    return 'SharkNinja';\n  } else if (hasSharkProducts) {\n    return 'Shark';\n  } else if (hasNinjaProducts) {\n    return 'Ninja';\n  }\n\n  return '';\n}""}",,,,Unused Variable
662,cJS - TikTok Array Data,jsm,,"{""javascript"":""function() {\n  var ga4EcommerceItems = {{cJS - eCommerce Object}}.ecommerce.items;\n\n  var transformToTikTokArray = function(ga4Items) {\n    return ga4Items.map(function(item) {\n      return {\n        content_id: item.item_id,\n        content_type: item.item_category,\n        content_name: item.item_name,\n        price: item.price,\n        quantity: item.quantity\n      };\n    });\n  };\n\n  var tikTokArray = transformToTikTokArray(ga4EcommerceItems);\n\n  // Return the JSON string of the TikTok array\n  return JSON.stringify(tikTokArray);\n}\n""}",GA4 - SS - Send Events,,,
666,dlv - BV ga_session_id,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ga_session_id""}",,,,Unused Variable
668,cJS - List of SKUs - Ninja,jsm,,"{""javascript"":""function (){\n  var products = {{cJS - eCommerce - ninjaProducts}};\n  var skuList = [];\n\n  for(var i = 0; i < products.length; i++){\n    if(products[i].category != 'main-product'){\n      skuList.push(\""'\"" + products[i].item_id + \""'\"");\n    }\n  }\n\n  return skuList.join(',');\n}""}",Horizon - DCM - Ninja - Purchase,,,
673,yieldify_campaign_variant,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""yieldify_campaign_variant""}",,,,Unused Variable
677,dlv - outbound,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""outbound""}",,,,Unused Variable
682,cJS - Last Name - Hashed,jsm,,"{""javascript"":""function() {\n  // determine if this is a guest or signed-in user and return the appropriate variable\n  var dlvLastName = {{DLV - last_name}};\n  if (dlvLastName && dlvLastName.length) {\n    return {{cJS - DLV Last Name - Hashed}};\n  }\n  \n  return {{cJS - EC Guest Last Name - Hashed}};\n}\n""}",GA4 - SS - Send Events,,,
683,yieldify_campaign_id,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""yieldify_campaign_id""}",,,,Unused Variable
688,DLV - Cookie Domain,v,,"{""setDefaultValue"":""false"",""dataLayerVersion"":""2"",""name"":""attributes.cookieDomain""}",,,LunaMetrics Cookie Management Plugin,Unused Variable
691,dlv - link_category,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""link_category""}",,,,Unused Variable
692,DLV - logged_in,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""logged_in""}",,,,Unused Variable
693,DLV - video_provider,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""video_provider""}",,,,Unused Variable
694,Lookup - Pinterest Pixel ID,smm,2618810012570,"{""setDefaultValue"":""true"",""input"":""{{Regex - Beauty/Home}}"",""defaultValue"":""2618810012570"",""map"":[{""key"":""Home"",""value"":""2618810012570""},{""key"":""Beauty"",""value"":""2614235820878""}]}",,,,Unused Variable
698,cJS - Main SKU Only - Shark,jsm,,"{""javascript"":""function(){\n  var products = {{GA4 - Ecommerce - items}};\n  var skus = [];\n  for(var i = 0; i < products.length; i++){\n    if(products[i].category === 'main-product'){\n    \tskus[i] = products[i].item_id.toLowerCase();\n    }\n  }\n\treturn (skus != null && skus != '') ? 'sharkmain' : '' ;\n}""}",,,Media Pixels,Unused Variable
702,cJS - Time,jsm,,"{""javascript"":""function(){\n  return window.performance.now();\n}""}",,,,Unused Variable
706,dlv - action,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""action""}",,,,Unused Variable
708,cJS - GA4 - last_purchased formatted,jsm,,"{""javascript"":""function() {\n  var d = {{GA4 - last_purchased}};\n  if (!d) return '';\n\n  // does the date translate to a valid timestamp\n  var ts = Date.parse(d);\n  // we'll assume Unix epoch and lower are not valid\n  if (ts <= 0) return '';\n\n  var dateObj = new Date(d);\n  return new Intl.DateTimeFormat('en-US', {\n    year: 'numeric',\n    month: '2-digit', // Ensures two digits for month (e.g., 01 for January)\n    day: '2-digit'    // Ensures two digits for day (e.g., 05 for the 5th)\n  }).format(dateObj);\n}""}",,,,Unused Variable
713,DLV - webVitalsMeasurement.value,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""webVitalsMeasurement.value""}",,,,Unused Variable
714,cJS - purchase - billing info first name,jsm,,"{""javascript"":""function () {\n    /**\n    * note: this will only work on the order-confirm page\n    **/\n  var details = document.querySelector('.summary-details.billing .address-summary .firstName');\n  if (!details) return '';\n  \n  return details.innerText.trim();\n}""}",Rokt - purchase,,,
717,yieldify_campaign_stage,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""yieldify_campaign_stage""}",,,,Unused Variable
719,GA4 - Ecommerce - tax,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.tax""}","GA4 - SS - Send Events, GA4 - Ecommerce - purchase",,GA4,
722,DLV - eCommerce Offer,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""true"",""name"":""ecommerce.promoView.promotions.0.name""}",,,Ecommerce,Unused Variable
725,dlv - BV ga_session_number,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ga_session_number""}",,,,Unused Variable
727,Cookie - Email Checkout,k,,"{""decodeCookie"":""true"",""name"":""checkoutuser""}",,,,Unused Variable
729,DLV - Old History State - Title,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""gtm.oldHistoryState.title""}",,,,Unused Variable
737,cJS - Promotion View Object,jsm,,"{""javascript"":""function(){\n  return {'ecommerce': {'promoView': {{DLV - eCommerce Promotion}} } };\n}""}",,,Google Analytics,Unused Variable
740,GA4 - Ecommerce - shipping_tier,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""ecommerce.shipping_tier""}",,,GA4,Unused Variable
745,Regex - performance cookies allowed,remm,FALSE,"{""setDefaultValue"":""true"",""input"":""{{dlv - OnetrustActiveGroups}}"",""fullMatch"":""false"",""replaceAfterMatch"":""false"",""defaultValue"":""false"",""ignoreCase"":""true"",""map"":[{""key"":"",C0002,"",""value"":""true""}]}",,,GDPR Cookie Consent Notification,Unused Variable
757,yieldify_campaign_action,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""yieldify_campaign_action""}",,,,Unused Variable
759,GA4 - label,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""label""}",,,,Unused Variable
764,cJS - purchase - billing info last name,jsm,,"{""javascript"":""function () {\n    /**\n    * note: this will only work on the order-confirm page\n    **/\n  var details = document.querySelector('.summary-details.billing .address-summary .lastName');\n  if (!details) return '';\n  \n  return details.innerText.trim();\n}""}",Rokt - purchase,,,
767,dlv - filterKeys,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""filterKeys""}",,,,Unused Variable
768,cJS - last_payment_type,jsm,,"{""javascript"":""function() {\n  var last_payment_type;\n  if (window.localStorage) {\n    last_payment_type = window.localStorage.getItem('last_payment_type');\n  }\n  \n  if (!last_payment_type) {\n    last_payment_type = 'unknown';\n  }\n  \n  return last_payment_type;\n}""}",Rokt - purchase,,,
772,cJS - Impact - transaction_id,jsm,,"{""javascript"":""function () {\n  var trans_id = {{GA4 - Ecommerce - transaction_id}};\n  if (!trans_id) return;\n\n  return \""0\""+trans_id;\n}""}",cHTML - Impact - Purchase,,,
777,DLV - popup_text,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""popup_text""}",GA4 - Event - email_signup,,,
778,cJS - email_module,jsm,,"{""javascript"":""function() {\n  var popup_text = {{DLV - popup_text}};\n  if (popup_text === 'checkout') {\n    return popup_text;\n  }\n\n  return 'footer';\n}""}",GA4 - Event - email_signup,,,
780,cJS - eCommerce - calculated items list value,jsm,,"{""javascript"":""function () {\n  /**\n    * helper function to calculate the extended price of all \n    * the items in the cart\n    **/\n  \n  // use the normalized items array just in case\n  var items = {{cJS - eCommerce - items (normalized)}};\n  \n  // Check if items is an array and has at least one\n  if (Array.isArray(items) && items.length > 0) {\n    var sum = 0;\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n      var price = (item.price - item.discount) * item.quantity;\n      sum += price;\n    }\n    \n    var sumFormattedString = sum.toFixed(2);\n    console.log('formattedString');\n    console.log(sumFormattedString);\n    \n    var result = parseFloat(sumFormattedString);\n    console.log('result');\n    console.log(result);\n    return result;\n    return parseFloat(sumFormattedString);\n  }\n\n  return 0;\n}""}",,,,Unused Variable
781,cJS - calculated coupon discount,jsm,,"{""javascript"":""function() {\n  // fetch the cart value\n  var ecomm_value = {{GA4 - Ecommerce - value}};\n  if (ecomm_value === undefined) {\n    return 0;\n  }\n  // fetch the sum of the calculated value of the items in the cart\n  var items_value = {{cJS - eCommerce - calculated items list value}};\n  if (!items_value) {\n    return 0;\n  }\n\n  // when the items_value is greater give back the difference\n  // this should be the coupon discount applied\n  if (items_value > ecomm_value) {\n    //return items_value - ecomm_value;\n\n    var items_cents = items_value * 100;\n    console.log('items cents');\n    console.log(items_cents);\n    var ecomm_cents = ecomm_value * 100;\n    console.log('ecomm cents');\n    console.log(ecomm_cents);\n    var result = items_cents - ecomm_cents;\n    console.log('diff');\n    console.log(result);\n    console.log('====');\n    return result / 100;\n  }\n  \n  // the coupon discount shouldn't be negative ...\n  return 0;\n}""}",cHTML - Impact - Purchase,,,
784,dlv - eventName,v,,"{""dataLayerVersion"":""2"",""setDefaultValue"":""false"",""name"":""eventName""}",GA4 - SS - Send Events,,,